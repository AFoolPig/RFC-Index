<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head profile="http://dublincore.org/documents/2008/08/04/dc-html/"> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta name="robots" content="index,follow" /> 
  <meta name="creator" content="rfcmarkup version 1.127" /> 
  <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" /> 
  <meta name="DC.Identifier" content="urn:ietf:rfc:7355" /> 
  <meta name="DC.Description.Abstract" content="RFC 7118 specifies a WebSocket subprotocol as a reliable real-time
transport mechanism between Session Initiation Protocol (SIP) entities
to enable usage of SIP in web-oriented deployments. This document
updates the SIP Common Log Format (CLF), defined in RFC 6873, with a
new &quot;Transport Flag&quot; for such SIP WebSocket transport." /> 
  <meta name="DC.Creator" content="Roman, Anton" /> 
  <meta name="DC.Creator" content="Pascual, Victor" /> 
  <meta name="DC.Creator" content="Garcia, Sergio" /> 
  <meta name="DC.Creator" content="Salgueiro, Gonzalo" /> 
  <meta name="DC.Date.Issued" content="September, 2014" /> 
  <meta name="DC.Title" content="Indicating WebSocket Protocol as a Transport in the Session Initiation Protocol (SIP) Common Log Format (CLF)" /> 
  <link rel="icon" href="/images/rfc.png" type="image/png" /> 
  <link rel="shortcut icon" href="/images/rfc.png" type="image/png" /> 
  <title>RFC 7355 - Indicating WebSocket Protocol as a Transport in the Session Initiation Protocol (SIP) Common Log Format (CLF)</title> 
  <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style> 
  <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]--> 
  <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script> 
 </head> 
 <body onload="addHeaderTags()"> 
  <div class="content"> 
   <div style="height: 13px;"> 
    <div onmouseover="this.style.cursor='pointer';" onclick="showElem('legend');" onmouseout="hideElem('legend')" style="height: 6px; position: absolute;" class="pre noprint docinfo bgorange" title="Click for colour legend."> 
    </div> 
    <div id="legend" class="docinfo noprint pre legend" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; " onmouseover="showElem('legend');" onmouseout="hideElem('legend');"> 
    </div> 
   </div> 
   <span class="pre noprint docinfo top">[<a href="https://tools.ietf.org/html/" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc7355.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc7355" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-salgueiro-dispatch-websocket-sipclf" title="draft-salgueiro-dispatch-websocket-sipclf">draft-salgueiro...</a>] [<a href="https://datatracker.ietf.org/doc/rfc7355" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc7355" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc7355" title="Side-by-side diff">Diff2</a>] </span>
   <br /> 
   <span class="pre noprint docinfo"> </span>
   <br /> 
   <span class="pre noprint docinfo"> INFORMATIONAL</span>
   <br /> 
   <span class="pre noprint docinfo"> </span>
   <br /> 
   <pre>Internet Engineering Task Force (IETF)                      G. Salgueiro
Request for Comments: 7355                                         Cisco
Updates: <a href="https://tools.ietf.org/html/rfc6873">6873</a>                                                 V. Pascual
Category: Informational                                         A. Roman
ISSN: 2070-1721                                                S. Garcia
                                                                  Quobis
                                                          September 2014


              <span class="h1"><h1>Indicating WebSocket Protocol as a Transport</h1></span>
    <span class="h1"><h1>in the Session Initiation Protocol (SIP) Common Log Format (CLF)</h1></span>

Abstract

   <a href="https://tools.ietf.org/html/rfc7118">RFC 7118</a> specifies a WebSocket subprotocol as a reliable real-time
   transport mechanism between Session Initiation Protocol (SIP)
   entities to enable usage of SIP in web-oriented deployments.  This
   document updates the SIP Common Log Format (CLF), defined in <a href="https://tools.ietf.org/html/rfc6873">RFC</a>
   <a href="https://tools.ietf.org/html/rfc6873">6873</a>, with a new &quot;Transport Flag&quot; for such SIP WebSocket transport.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="https://tools.ietf.org/html/rfc5741#section-2">Section&nbsp;2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7355">http://www.rfc-editor.org/info/rfc7355</a>.
















<span class="grey">Salgueiro, et al.             Informational                     [Page 1]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-2" id="page-2" href="https://tools.ietf.org/html/rfc7355#page-2" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7355">RFC 7355</a>             WebSocket Transport in SIP CLF       September 2014</span>


Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="https://tools.ietf.org/html/rfc7355#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7355#page-3">3</a>
   <a href="https://tools.ietf.org/html/rfc7355#section-2">2</a>.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7355#page-3">3</a>
   <a href="https://tools.ietf.org/html/rfc7355#section-3">3</a>.  Document Conventions  . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7355#page-3">3</a>
   <a href="https://tools.ietf.org/html/rfc7355#section-4">4</a>.  Usage of the WebSocket Transport Flag . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7355#page-3">3</a>
   <a href="https://tools.ietf.org/html/rfc7355#section-5">5</a>.  Examples  . . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7355#page-4">4</a>
     <a href="https://tools.ietf.org/html/rfc7355#section-5.1">5.1</a>.  SIP over WebSocket (WS) . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7355#page-4">4</a>
     <a href="https://tools.ietf.org/html/rfc7355#section-5.2">5.2</a>.  SIP over Secure WebSocket (WSS) . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7355#page-6">6</a>
   <a href="https://tools.ietf.org/html/rfc7355#section-6">6</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7355#page-7">7</a>
   <a href="https://tools.ietf.org/html/rfc7355#section-7">7</a>.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7355#page-7">7</a>
   <a href="https://tools.ietf.org/html/rfc7355#section-8">8</a>.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7355#page-7">7</a>
   <a href="https://tools.ietf.org/html/rfc7355#section-9">9</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7355#page-8">8</a>
     <a href="https://tools.ietf.org/html/rfc7355#section-9.1">9.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7355#page-8">8</a>
     <a href="https://tools.ietf.org/html/rfc7355#section-9.2">9.2</a>.  Informative References  . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7355#page-8">8</a>





















<span class="grey">Salgueiro, et al.             Informational                     [Page 2]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-3" id="page-3" href="https://tools.ietf.org/html/rfc7355#page-3" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7355">RFC 7355</a>             WebSocket Transport in SIP CLF       September 2014</span>


<span class="h2"><h2><a class="selflink" name="section-1" href="https://tools.ietf.org/html/rfc7355#section-1">1</a>. Introduction</h2></span>

   The WebSocket protocol [<a href="https://tools.ietf.org/html/rfc6455" title="&quot;The WebSocket Protocol&quot;">RFC6455</a>] enables bidirectional message
   exchange between clients and servers on top of a persistent TCP
   connection (optionally secured with TLS [<a href="https://tools.ietf.org/html/rfc5246" title="&quot;The Transport Layer Security (TLS) Protocol Version 1.2&quot;">RFC5246</a>]).  The initial
   protocol handshake makes use of HTTP [<a href="https://tools.ietf.org/html/rfc7230" title="&quot;Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing&quot;">RFC7230</a>] semantics, allowing
   the WebSocket protocol to reuse existing transport connections.

   <a href="https://tools.ietf.org/html/rfc7118">RFC 7118</a> [<a href="https://tools.ietf.org/html/rfc7118" title="&quot;The WebSocket Protocol as a Transport for the Session Initiation Protocol (SIP)&quot;">RFC7118</a>] defines a WebSocket subprotocol for transporting
   SIP messages between a WebSocket client and server.

   SIP messages can be logged using the Common Log Format defined in <a href="https://tools.ietf.org/html/rfc6873">RFC</a>
   <a href="https://tools.ietf.org/html/rfc6873">6873</a> [<a href="https://tools.ietf.org/html/rfc6873" title="&quot;Format for the Session Initiation Protocol (SIP) Common Log Format (CLF)&quot;">RFC6873</a>].  In order to make such SIP CLF logging possible for
   SIP messages transported over the WebSocket protocol, a new WebSocket
   &quot;Transport Flag&quot; ('W') must be added to the &quot;Transport Flags&quot; already
   defined in <a href="https://tools.ietf.org/html/rfc6873">RFC 6873</a> [<a href="https://tools.ietf.org/html/rfc6873" title="&quot;Format for the Session Initiation Protocol (SIP) Common Log Format (CLF)&quot;">RFC6873</a>] (i.e., UDP, TCP, and SCTP).

   This document updates <a href="https://tools.ietf.org/html/rfc6873">RFC 6873</a> [<a href="https://tools.ietf.org/html/rfc6873" title="&quot;Format for the Session Initiation Protocol (SIP) Common Log Format (CLF)&quot;">RFC6873</a>] by defining a new SIP CLF
   &quot;Transport Flag&quot; value for WebSocket.

<span class="h2"><h2><a class="selflink" name="section-2" href="https://tools.ietf.org/html/rfc7355#section-2">2</a>. Terminology</h2></span>

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this
   document are to be interpreted as described in [<a href="https://tools.ietf.org/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>].

<span class="h2"><h2><a class="selflink" name="section-3" href="https://tools.ietf.org/html/rfc7355#section-3">3</a>. Document Conventions</h2></span>

   This document contains several examples of SIP CLF records showing
   messages over plain and secure WebSocket connections.  The formatting
   described in this document does not permit the examples to be
   unambiguously rendered due to the constraints imposed by the
   formatting rules for RFCs.  To avoid ambiguity and to meet the RFC
   layout requirements, this document uses the &lt;allOneLine/&gt; markup
   convention established in [<a href="https://tools.ietf.org/html/rfc4475" title="&quot;Session Initiation Protocol (SIP) Torture Test Messages&quot;">RFC4475</a>].  This markup convention is
   described in detail in <a href="https://tools.ietf.org/html/rfc6873#section-3">Section&nbsp;3 of RFC 6873</a> [<a href="https://tools.ietf.org/html/rfc6873" title="&quot;Format for the Session Initiation Protocol (SIP) Common Log Format (CLF)&quot;">RFC6873</a>] and used
   throughout that document for representing the syntax of SIP CLF
   records.

<span class="h2"><h2><a class="selflink" name="section-4" href="https://tools.ietf.org/html/rfc7355#section-4">4</a>. Usage of the WebSocket Transport Flag</h2></span>

   <a href="https://tools.ietf.org/html/rfc6873#section-4.2">Section&nbsp;4.2 of RFC6873</a> [<a href="https://tools.ietf.org/html/rfc6873" title="&quot;Format for the Session Initiation Protocol (SIP) Common Log Format (CLF)&quot;">RFC6873</a>] specifies the mandatory fields in a
   SIP CLF record.  The fourth and fifth bytes of the five-byte &quot;Flags
   Field&quot; are the &quot;Transport Flag&quot; and the &quot;Encryption Flag&quot;,
   respectively.  SIP messages transported over both a plain and secure
   WebSocket connection can be clearly distinguished by appropriately
   setting these two flag fields.




<span class="grey">Salgueiro, et al.             Informational                     [Page 3]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-4" id="page-4" href="https://tools.ietf.org/html/rfc7355#page-4" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7355">RFC 7355</a>             WebSocket Transport in SIP CLF       September 2014</span>


   The currently registered values of the &quot;Transport Flag&quot; (<a href="https://tools.ietf.org/html/rfc6873#section-9.2">Section&nbsp;9.2
   of RFC 6873</a>) are UDP ('U'), TCP ('T'), and SCTP ('S').  This document
   defines and registers a new &quot;Transport Flag&quot; value 'W' for WebSocket
   transport of SIP messages and consequently updates <a href="https://tools.ietf.org/html/rfc6873">RFC 6873</a> [<a href="https://tools.ietf.org/html/rfc6873" title="&quot;Format for the Session Initiation Protocol (SIP) Common Log Format (CLF)&quot;">RFC6873</a>]
   and the IANA &quot;SIP CLF Transport Flag Values&quot; registry.

   SIP CLF records of messages transported over a plain WebSocket
   connection (WS) MUST set the &quot;Transport Flag&quot; to this new 'W' value
   and the &quot;Encryption Flag&quot; value to 'U' (Unencrypted).  SIP CLF
   records of messages transported over a secure WebSocket (WSS)
   connection (i.e., WS over TLS) MUST set the &quot;Transport Flag&quot; to this
   new 'W' value and the &quot;Encryption Flag&quot; value to 'E' (Encrypted).

<span class="h2"><h2><a class="selflink" name="section-5" href="https://tools.ietf.org/html/rfc7355#section-5">5</a>. Examples</h2></span>

   The following examples show sample SIP CLF records logged for SIP
   messages transported over both plain and secure WebSocket
   connections.

<span class="h3"><h3><a class="selflink" name="section-5.1" href="https://tools.ietf.org/html/rfc7355#section-5.1">5.1</a>. SIP over WebSocket (WS)</h3></span>

   The following example represents a SIP INVITE request sent over a
   plain WebSocket connection.  For the sake of brevity, the Session
   Description Protocol (SDP) [<a href="https://tools.ietf.org/html/rfc4566" title="&quot;SDP: Session Description Protocol&quot;">RFC4566</a>] body is omitted.

   INVITE sip:bob@example.com SIP/2.0
   Via: SIP/2.0/WS df7jal23ls0d.invalid;branch=z9hG4bK56sdasks
   From: sip:alice@example.com;tag=asdyka899
   To: sip:bob@example.com
   Call-ID: asidkj3ss
   CSeq: 1 INVITE
   Max-Forwards: 70
   Date: Thu, 6 Feb 2014 15:02:03 GMT
   Supported: path, outbound, gruu
   Route: &lt;sip:proxy.example.com:80;transport=ws;lr&gt;
   Contact: &lt;sip:alice@example.com;gr=urn:uuid:f81-7dec-14a06cf1;ob&gt;
   Content-Type: application/sdp
   Content-Length: 418

   Shown below is approximately how this message would appear as a
   single record in a SIP CLF logging file if encoded according to the
   syntax described in [<a href="https://tools.ietf.org/html/rfc6873" title="&quot;Format for the Session Initiation Protocol (SIP) Common Log Format (CLF)&quot;">RFC6873</a>].  Due to RFC conventions, this log
   entry has been split into five lines, instead of the two lines that
   actually appear in a log file; and the tab characters have been
   padded out using spaces to simulate their appearance in a text
   terminal.





<span class="grey">Salgueiro, et al.             Informational                     [Page 4]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-5" id="page-5" href="https://tools.ietf.org/html/rfc7355#page-5" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7355">RFC 7355</a>             WebSocket Transport in SIP CLF       September 2014</span>


   A0000E7,0053005C005E00720080009200A600A800BE00C800D200DE00E7
   &lt;allOneLine&gt;
   1328821153.010    RORWU    1 INVITE    -    sip:bob@example.com
   192.0.2.10:80    192.0.2.200:56485    sip:bob@example.com    -
   sip:alice@example.com    asdyka899    asidkj3ss    S1781761-88
   C67651-11
   &lt;/allOneLine&gt;

   A bit-exact version of the actual log entry is provided here, Base64
   encoded [<a href="https://tools.ietf.org/html/rfc4648" title="&quot;The Base16, Base32, and Base64 Data Encodings&quot;">RFC4648</a>], using the uuencode utility.

   begin-base64 644 clf_ws_record
   QTAwMDBFNywwMDUzMDA1QzAwNUUwMDcyMDA4MDAwOTIwMEE2MDBBODAwQkUwMEM4MDBE
   MjAwREUwMEU3CjEzMjg4MjExNTMuMDEwCVJPUldVCTEgSU5WSVRFCS0Jc2lwOmJvYkBl
   eGFtcGxlLmNvbQkxOTIuMC4yLjEwOjgwCTE5Mi4wLjIuMjAwOjU2NDg1CXNpcDpib2JA
   ZXhhbXBsZS5jb20JLQlzaXA6YWxpY2VAZXhhbXBsZS5jb20JYXNkeWthODk5CWFzaWRr
   ajNzcwlTMTc4MTc2MS04OAlDNjc2NTEtMTEKCg==
   ====

   The original SIP CLF format can be obtained by reversing the effects
   of uuencode by simply applying the uudecode transform.  Additionally,
   to recover the unencoded file, the Base64 text above may be passed as
   input to the following perl script (the output should be redirected
   to a file).

   &lt;CODE BEGINS&gt;

   #!/usr/bin/perl
   use strict;
   my $bdata = &quot;&quot;;
   use MIME::Base64;
   while(&lt;&gt;)
   {
         if (/begin-base64 644 clf_ws_record/ .. /-- ==== --/)
         {
             if ( m/^\s*[^\s]+\s*$/)
             {
               $bdata = $bdata . $_;
             }
          }
   }
   print decode_base64($bdata);

   &lt;CODE ENDS&gt;







<span class="grey">Salgueiro, et al.             Informational                     [Page 5]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-6" id="page-6" href="https://tools.ietf.org/html/rfc7355#page-6" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7355">RFC 7355</a>             WebSocket Transport in SIP CLF       September 2014</span>


<span class="h3"><h3><a class="selflink" name="section-5.2" href="https://tools.ietf.org/html/rfc7355#section-5.2">5.2</a>. SIP over Secure WebSocket (WSS)</h3></span>

   The following example represents a SIP INVITE request sent over a
   secure WebSocket connection (i.e., WebSocket over TLS [<a href="https://tools.ietf.org/html/rfc5246" title="&quot;The Transport Layer Security (TLS) Protocol Version 1.2&quot;">RFC5246</a>]).
   For the sake of brevity, the SDP body is omitted.

   INVITE sip:bob@example.com SIP/2.0
   Via: SIP/2.0/WSS df7jal23ls0d.invalid;branch=z9hG4bK56sdasks
   From: sip:alice@example.com;tag=asdyka899
   To: sip:bob@example.com
   Call-ID: asidkj3ss
   CSeq: 1 INVITE
   Max-Forwards: 70
   Date: Thu, 6 Feb 2014 15:02:03 GMT
   Supported: path, outbound, gruu
   Route: &lt;sip:proxy.example.com:443;transport=ws;lr&gt;
   Contact: &lt;sip:alice@example.com;gr=urn:uuid:f81-7dec-14a06cf1;ob&gt;
   Content-Type: application/sdp
   Content-Length: 439

   Shown below is approximately how this message would appear as a
   single record in a SIP CLF logging file if encoded according to the
   syntax described in [<a href="https://tools.ietf.org/html/rfc6873" title="&quot;Format for the Session Initiation Protocol (SIP) Common Log Format (CLF)&quot;">RFC6873</a>].  Due to RFC conventions, this log
   entry has been split into five lines, instead of the two lines that
   actually appear in a log file; and the tab characters have been
   padded out using spaces to simulate their appearance in a text
   terminal.

   A0000E8,0053005C005E00720081009300A700A900BF00C900D300DF00E8
   &lt;allOneLine&gt;
   1328821153.010    RORWE    1 INVITE    -    sip:bob@example.com
   192.0.2.10:443    192.0.2.200:56485    sip:bob@example.com    -
   sip:alice@example.com:5060    asdyka899    asidkj3ss    S1781761-88
   C67651-11
   &lt;/allOneLine&gt;

   A bit-exact version of the actual log entry is provided here, Base64
   encoded.

   begin-base64 644 clf_ws_record
   QTAwMDBFOCwwMDUzMDA1QzAwNUUwMDcyMDA4MTAwOTMwMEE3MDBBOTAwQkYwMEM5MDBE
   MzAwREYwMEU4CjEzMjg4MjExNTMuMDEwCVJPUldVCTEgSU5WSVRFCS0Jc2lwOmJvYkBl
   eGFtcGxlLmNvbQkxOTIuMC4yLjEwOjQ0MwkxOTIuMC4yLjIwMDo1NjQ4NQlzaXA6Ym9i
   QGV4YW1wbGUuY29tCS0Jc2lwOmFsaWNlQGV4YW1wbGUuY29tCWFzZHlrYTg5OQlhc2lk
   a2ozc3MJUzE3ODE3NjEtODgJQzY3NjUxLTExCgo=
   ====





<span class="grey">Salgueiro, et al.             Informational                     [Page 6]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-7" id="page-7" href="https://tools.ietf.org/html/rfc7355#page-7" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7355">RFC 7355</a>             WebSocket Transport in SIP CLF       September 2014</span>


<span class="h2"><h2><a class="selflink" name="section-6" href="https://tools.ietf.org/html/rfc7355#section-6">6</a>. Security Considerations</h2></span>

   This document merely adds a new &quot;Transport Flag&quot; value for the
   WebSocket protocol.  This value may be set in a SIP CLF record, but
   its use does not intrinsically introduce any new security
   considerations.  When logging protocol information, such as with SIP
   CLF, there are a myriad of security, privacy, and data protection
   issues to consider.  These are exhaustively described in <a href="https://tools.ietf.org/html/rfc6872">RFC 6872</a>
   [<a href="https://tools.ietf.org/html/rfc6872" title="&quot;The Common Log Format (CLF) for the Session Initiation Protocol (SIP): Framework and Information Model&quot;">RFC6872</a>] and <a href="https://tools.ietf.org/html/rfc6873">RFC 6873</a> [<a href="https://tools.ietf.org/html/rfc6873" title="&quot;Format for the Session Initiation Protocol (SIP) Common Log Format (CLF)&quot;">RFC6873</a>].

   Any security considerations specific to the WebSocket protocol or its
   application as a transport for SIP are detailed in the relevant
   specifications (the WebSocket protocol [<a href="https://tools.ietf.org/html/rfc6455" title="&quot;The WebSocket Protocol&quot;">RFC6455</a>] and SIP over
   WebSockets [<a href="https://tools.ietf.org/html/rfc7118" title="&quot;The WebSocket Protocol as a Transport for the Session Initiation Protocol (SIP)&quot;">RFC7118</a>]) and are considered outside the scope of this
   document.

<span class="h2"><h2><a class="selflink" name="section-7" href="https://tools.ietf.org/html/rfc7355#section-7">7</a>. IANA Considerations</h2></span>

   This document defines a new value ('W') for SIP CLF &quot;Transport Flag&quot;.
   IANA has registered this value in the &quot;SIP CLF Transport Flag Values&quot;
   registry, as shown in Table 1 below.

            +-------+--------------------+--------------------+
            | Value | Transport Protocol |     Reference      |
            +-------+--------------------+--------------------+
            |   W   |     WebSocket      | <a href="https://tools.ietf.org/html/rfc7118">RFC 7118</a>, <a href="https://tools.ietf.org/html/rfc7355">RFC 7355</a> |
            +-------+--------------------+--------------------+

              Table 1: IANA-Registered SIP CLF Transport Flag

<span class="h2"><h2><a class="selflink" name="section-8" href="https://tools.ietf.org/html/rfc7355#section-8">8</a>. Acknowledgements</h2></span>

   The authors would like to thank Vijay Gurbani for shepherding this
   document and Area Director Richard Barnes for his sponsorship.  This
   work benefitted from the thorough review and constructive comments of
   Richard Barnes, Barry Leiba, Benoit Claise, Pete Resnick, Stephen
   Farrel, and Vijay Gurbani.














<span class="grey">Salgueiro, et al.             Informational                     [Page 7]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-8" id="page-8" href="https://tools.ietf.org/html/rfc7355#page-8" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7355">RFC 7355</a>             WebSocket Transport in SIP CLF       September 2014</span>


<span class="h2"><h2><a class="selflink" name="section-9" href="https://tools.ietf.org/html/rfc7355#section-9">9</a>. References</h2></span>

<span class="h3"><h3><a class="selflink" name="section-9.1" href="https://tools.ietf.org/html/rfc7355#section-9.1">9.1</a>. Normative References</h3></span>

   [<a name="ref-RFC2119" id="ref-RFC2119">RFC2119</a>]  Bradner, S., &quot;Key words for use in RFCs to Indicate
              Requirement Levels&quot;, <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="https://tools.ietf.org/html/rfc2119">RFC 2119</a>, March 1997.

   [<a name="ref-RFC6455" id="ref-RFC6455">RFC6455</a>]  Fette, I. and A. Melnikov, &quot;The WebSocket Protocol&quot;, <a href="https://tools.ietf.org/html/rfc6455">RFC</a>
              <a href="https://tools.ietf.org/html/rfc6455">6455</a>, December 2011.

   [<a name="ref-RFC6872" id="ref-RFC6872">RFC6872</a>]  Gurbani, V., Burger, E., Anjali, T., Abdelnur, H., and O.
              Festor, &quot;The Common Log Format (CLF) for the Session
              Initiation Protocol (SIP): Framework and Information
              Model&quot;, <a href="https://tools.ietf.org/html/rfc6872">RFC 6872</a>, February 2013.

   [<a name="ref-RFC6873" id="ref-RFC6873">RFC6873</a>]  Salgueiro, G., Gurbani, V., and A. Roach, &quot;Format for the
              Session Initiation Protocol (SIP) Common Log Format
              (CLF)&quot;, <a href="https://tools.ietf.org/html/rfc6873">RFC 6873</a>, February 2013.

   [<a name="ref-RFC7118" id="ref-RFC7118">RFC7118</a>]  Baz Castillo, I., Millan Villegas, J., and V. Pascual,
              &quot;The WebSocket Protocol as a Transport for the Session
              Initiation Protocol (SIP)&quot;, <a href="https://tools.ietf.org/html/rfc7118">RFC 7118</a>, January 2014.

<span class="h3"><h3><a class="selflink" name="section-9.2" href="https://tools.ietf.org/html/rfc7355#section-9.2">9.2</a>. Informative References</h3></span>

   [<a name="ref-RFC4475" id="ref-RFC4475">RFC4475</a>]  Sparks, R., Hawrylyshen, A., Johnston, A., Rosenberg, J.,
              and H. Schulzrinne, &quot;Session Initiation Protocol (SIP)
              Torture Test Messages&quot;, <a href="https://tools.ietf.org/html/rfc4475">RFC 4475</a>, May 2006.

   [<a name="ref-RFC4566" id="ref-RFC4566">RFC4566</a>]  Handley, M., Jacobson, V., and C. Perkins, &quot;SDP: Session
              Description Protocol&quot;, <a href="https://tools.ietf.org/html/rfc4566">RFC 4566</a>, July 2006.

   [<a name="ref-RFC4648" id="ref-RFC4648">RFC4648</a>]  Josefsson, S., &quot;The Base16, Base32, and Base64 Data
              Encodings&quot;, <a href="https://tools.ietf.org/html/rfc4648">RFC 4648</a>, October 2006.

   [<a name="ref-RFC5246" id="ref-RFC5246">RFC5246</a>]  Dierks, T. and E. Rescorla, &quot;The Transport Layer Security
              (TLS) Protocol Version 1.2&quot;, <a href="https://tools.ietf.org/html/rfc5246">RFC 5246</a>, August 2008.

   [<a name="ref-RFC7230" id="ref-RFC7230">RFC7230</a>]  Fielding, R. and J. Reschke, &quot;Hypertext Transfer Protocol
              (HTTP/1.1): Message Syntax and Routing&quot;, <a href="https://tools.ietf.org/html/rfc7230">RFC 7230</a>, June
              2014.










<span class="grey">Salgueiro, et al.             Informational                     [Page 8]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-9" id="page-9" href="https://tools.ietf.org/html/rfc7355#page-9" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7355">RFC 7355</a>             WebSocket Transport in SIP CLF       September 2014</span>


Authors' Addresses

   Gonzalo Salgueiro
   Cisco Systems, Inc.
   7200-12 Kit Creek Road
   Research Triangle Park, NC  27709
   US

   EMail: gsalguei@cisco.com


   Victor Pascual
   Quobis

   EMail: victor.pascual@quobis.com


   Anton Roman
   Quobis

   EMail: anton.roman@quobis.com


   Sergio Garcia Ramos
   Quobis

   EMail: sergio.garcia@quobis.com
























Salgueiro, et al.             Informational                     [Page 9]

</pre>
   <br /> 
   <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.127, available from <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a> </small></small></span> 
  </div> 
 </body>
</html>