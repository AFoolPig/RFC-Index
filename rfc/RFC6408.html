<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head profile="http://dublincore.org/documents/2008/08/04/dc-html/"> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta name="robots" content="index,follow" /> 
  <meta name="creator" content="rfcmarkup version 1.127" /> 
  <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" /> 
  <meta name="DC.Relation.Replaces" content="draft-jones-dime-extended-naptr" /> 
  <meta name="DC.Identifier" content="urn:ietf:rfc:6408" /> 
  <meta name="DC.Date.Issued" content="November, 2011" /> 
  <meta name="DC.Creator" content="Jones, Mark" /> 
  <meta name="DC.Creator" content="Korhonen, Jouni" /> 
  <meta name="DC.Description.Abstract" content="The Diameter base protocol specifies mechanisms whereby a given realm
may advertise Diameter nodes and the supported transport protocol.
However, these mechanisms do not reveal the Diameter applications that
each node supports. A peer outside the realm would have to perform a
Diameter capability exchange with every node until it discovers one
that supports the required application. This document updates RFC
3588, &quot;Diameter Base Protocol&quot;, and describes an improvement using an
extended format for the Straightforward-Naming Authority Pointer
(S-NAPTR) application service tag that allows for discovery of the
supported applications without doing Diameter capability exchange
beforehand. [STANDARDS-TRACK]" /> 
  <meta name="DC.Title" content="Diameter Straightforward-Naming Authority Pointer (S-NAPTR) Usage" /> 
  <link rel="icon" href="/images/rfc.png" type="image/png" /> 
  <link rel="shortcut icon" href="/images/rfc.png" type="image/png" /> 
  <title>RFC 6408 - Diameter Straightforward-Naming Authority Pointer (S-NAPTR) Usage</title> 
  <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style> 
  <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]--> 
  <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script> 
 </head> 
 <body onload="addHeaderTags()"> 
  <div class="content"> 
   <div style="height: 13px;"> 
    <div onmouseover="this.style.cursor='pointer';" onclick="showElem('legend');" onmouseout="hideElem('legend')" style="height: 6px; position: absolute;" class="pre noprint docinfo bgblue" title="Click for colour legend."> 
    </div> 
    <div id="legend" class="docinfo noprint pre legend" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; " onmouseover="showElem('legend');" onmouseout="hideElem('legend');"> 
    </div> 
   </div> 
   <span class="pre noprint docinfo top">[<a href="https://tools.ietf.org/html/" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6408.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6408" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-dime-extended-naptr" title="draft-ietf-dime-extended-naptr">draft-ietf-dime...</a>] [<a href="https://datatracker.ietf.org/doc/rfc6408" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6408" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6408" title="Side-by-side diff">Diff2</a>] </span>
   <br /> 
   <span class="pre noprint docinfo"> </span>
   <br /> 
   <span class="pre noprint docinfo"> PROPOSED STANDARD</span>
   <br /> 
   <span class="pre noprint docinfo"> </span>
   <br /> 
   <pre>Internet Engineering Task Force (IETF)                          M. Jones
Request for Comments: 6408                           Bridgewater Systems
Updates: <a href="https://tools.ietf.org/html/rfc3588">3588</a>                                                J. Korhonen
Category: Standards Track                         Nokia Siemens Networks
ISSN: 2070-1721                                                L. Morand
                                                             Orange Labs
                                                           November 2011


   <span class="h1"><h1>Diameter Straightforward-Naming Authority Pointer (S-NAPTR) Usage</h1></span>

Abstract

   The Diameter base protocol specifies mechanisms whereby a given realm
   may advertise Diameter nodes and the supported transport protocol.
   However, these mechanisms do not reveal the Diameter applications
   that each node supports.  A peer outside the realm would have to
   perform a Diameter capability exchange with every node until it
   discovers one that supports the required application.  This document
   updates <a href="https://tools.ietf.org/html/rfc3588">RFC 3588</a>, &quot;Diameter Base Protocol&quot;, and describes an
   improvement using an extended format for the Straightforward-Naming
   Authority Pointer (S-NAPTR) application service tag that allows for
   discovery of the supported applications without doing Diameter
   capability exchange beforehand.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="https://tools.ietf.org/html/rfc5741#section-2">Section&nbsp;2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6408">http://www.rfc-editor.org/info/rfc6408</a>.













<span class="grey">Jones, et al.                Standards Track                    [Page 1]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-2" id="page-2" href="https://tools.ietf.org/html/rfc6408#page-2" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc6408">RFC 6408</a>                 Diameter S-NAPTR Usage            November 2011</span>


Copyright Notice

   Copyright (c) 2011 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="https://tools.ietf.org/html/rfc6408#section-1">1</a>. Introduction ....................................................<a href="https://tools.ietf.org/html/rfc6408#page-2">2</a>
   <a href="https://tools.ietf.org/html/rfc6408#section-2">2</a>. Terminology .....................................................<a href="https://tools.ietf.org/html/rfc6408#page-3">3</a>
      <a href="https://tools.ietf.org/html/rfc6408#section-2.1">2.1</a>. Requirements Language ......................................<a href="https://tools.ietf.org/html/rfc6408#page-3">3</a>
   <a href="https://tools.ietf.org/html/rfc6408#section-3">3</a>. Extended NAPTR Service Field Format .............................<a href="https://tools.ietf.org/html/rfc6408#page-3">3</a>
      <a href="https://tools.ietf.org/html/rfc6408#section-3.1">3.1</a>. IETF Standards Track Diameter Applications .................<a href="https://tools.ietf.org/html/rfc6408#page-5">5</a>
      <a href="https://tools.ietf.org/html/rfc6408#section-3.2">3.2</a>. Vendor-Specific Diameter Applications ......................<a href="https://tools.ietf.org/html/rfc6408#page-5">5</a>
   <a href="https://tools.ietf.org/html/rfc6408#section-4">4</a>. Backwards Compatibility .........................................<a href="https://tools.ietf.org/html/rfc6408#page-5">5</a>
   <a href="https://tools.ietf.org/html/rfc6408#section-5">5</a>. Extended NAPTR-Based Diameter Peer Discovery ....................<a href="https://tools.ietf.org/html/rfc6408#page-6">6</a>
      <a href="https://tools.ietf.org/html/rfc6408#section-5.1">5.1</a>. Examples ...................................................<a href="https://tools.ietf.org/html/rfc6408#page-7">7</a>
   <a href="https://tools.ietf.org/html/rfc6408#section-6">6</a>. Usage Guidelines ................................................<a href="https://tools.ietf.org/html/rfc6408#page-8">8</a>
   <a href="https://tools.ietf.org/html/rfc6408#section-7">7</a>. IANA Considerations .............................................<a href="https://tools.ietf.org/html/rfc6408#page-9">9</a>
      <a href="https://tools.ietf.org/html/rfc6408#section-7.1">7.1</a>. IETF Diameter Application Service Tags .....................<a href="https://tools.ietf.org/html/rfc6408#page-9">9</a>
      <a href="https://tools.ietf.org/html/rfc6408#section-7.2">7.2</a>. 3GPP Diameter Application Service Tags .....................<a href="https://tools.ietf.org/html/rfc6408#page-9">9</a>
      <a href="https://tools.ietf.org/html/rfc6408#section-7.3">7.3</a>. WiMAX Forum Diameter Application Service Tags .............<a href="https://tools.ietf.org/html/rfc6408#page-10">10</a>
      <a href="https://tools.ietf.org/html/rfc6408#section-7.4">7.4</a>. Vendor-Specific Diameter Application Service Tags .........<a href="https://tools.ietf.org/html/rfc6408#page-10">10</a>
      <a href="https://tools.ietf.org/html/rfc6408#section-7.5">7.5</a>. Diameter Application Protocol Tags ........................<a href="https://tools.ietf.org/html/rfc6408#page-11">11</a>
   <a href="https://tools.ietf.org/html/rfc6408#section-8">8</a>. Security Considerations ........................................<a href="https://tools.ietf.org/html/rfc6408#page-11">11</a>
   <a href="https://tools.ietf.org/html/rfc6408#section-9">9</a>. Acknowledgments ................................................<a href="https://tools.ietf.org/html/rfc6408#page-11">11</a>
   <a href="https://tools.ietf.org/html/rfc6408#section-10">10</a>. References ....................................................<a href="https://tools.ietf.org/html/rfc6408#page-12">12</a>
      <a href="https://tools.ietf.org/html/rfc6408#section-10.1">10.1</a>. Normative References .....................................<a href="https://tools.ietf.org/html/rfc6408#page-12">12</a>
      <a href="https://tools.ietf.org/html/rfc6408#section-10.2">10.2</a>. Informative References ...................................<a href="https://tools.ietf.org/html/rfc6408#page-14">14</a>

<span class="h2"><h2><a class="selflink" name="section-1" href="https://tools.ietf.org/html/rfc6408#section-1">1</a>. Introduction</h2></span>

   The Diameter base protocol [<a href="https://tools.ietf.org/html/rfc3588" title="&quot;Diameter Base Protocol&quot;">RFC3588</a>] specifies three mechanisms for
   Diameter peer discovery.  One of these involves the Diameter
   implementation performing a Naming Authority Pointer (NAPTR) query
   [<a href="https://tools.ietf.org/html/rfc3403" title="&quot;Dynamic Delegation Discovery System (DDDS) Part Three: The Domain Name System (DNS) Database&quot;">RFC3403</a>] for a server in a particular realm.  These NAPTR records






<span class="grey">Jones, et al.                Standards Track                    [Page 2]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-3" id="page-3" href="https://tools.ietf.org/html/rfc6408#page-3" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc6408">RFC 6408</a>                 Diameter S-NAPTR Usage            November 2011</span>


   provide a mapping from a domain to the DNS Service Locator (SRV)
   record [<a href="https://tools.ietf.org/html/rfc2782" title="&quot;A DNS RR for specifying the location of services (DNS SRV)&quot;">RFC2782</a>] or A/AAAA record [<a href="https://tools.ietf.org/html/rfc1035" title="&quot;Domain names - implementation and specification&quot;">RFC1035</a>] [<a href="https://tools.ietf.org/html/rfc3596" title="&quot;DNS Extensions to Support IP Version 6&quot;">RFC3596</a>] for contacting
   a server with the specific transport protocol in the NAPTR services
   field.

   The extended NAPTR usage for Diameter peer discovery defined by this
   document is based on the Straightforward-NAPTR (S-NAPTR) Dynamic
   Delegation Discovery System (DDDS) application defined in [<a href="https://tools.ietf.org/html/rfc3958" title="&quot;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS)&quot;">RFC3958</a>].
   This document updates the Diameter peer discovery procedure described
   in <a href="https://tools.ietf.org/html/rfc3588#section-5.2">Section&nbsp;5.2 of [RFC3588]</a> and defines S-NAPTR application service
   and application protocol tag values that permit the discovery of
   Diameter peers that support a specific Diameter application and
   transport protocol.

<span class="h2"><h2><a class="selflink" name="section-2" href="https://tools.ietf.org/html/rfc6408#section-2">2</a>. Terminology</h2></span>

   The Diameter base protocol specification (<a href="https://tools.ietf.org/html/rfc3588#section-1.3">Section&nbsp;1.3 of [RFC3588]</a>)
   and the Straightforward-NAPTR (S-NAPTR) DDDS application (<a href="https://tools.ietf.org/html/rfc3958#section-2.1">Section&nbsp;2.1
   of [RFC3958]</a>) define the terminology used in this document.

<span class="h3"><h3><a class="selflink" name="section-2.1" href="https://tools.ietf.org/html/rfc6408#section-2.1">2.1</a>. Requirements Language</h3></span>

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this
   document are to be interpreted as described in [<a href="https://tools.ietf.org/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>].

<span class="h2"><h2><a class="selflink" name="section-3" href="https://tools.ietf.org/html/rfc6408#section-3">3</a>. Extended NAPTR Service Field Format</h2></span>

   The NAPTR service field format defined by the S-NAPTR DDDS
   application in [<a href="https://tools.ietf.org/html/rfc3958" title="&quot;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS)&quot;">RFC3958</a>] follows this Augmented Backus-Naur Form
   (ABNF) [<a href="https://tools.ietf.org/html/rfc5234" title="&quot;Augmented BNF for Syntax Specifications: ABNF&quot;">RFC5234</a>]:

       service-parms = [ [app-service] *(&quot;:&quot; app-protocol)]
       app-service   = experimental-service  / iana-registered-service
       app-protocol  = experimental-protocol / iana-registered-protocol
       experimental-service      = &quot;x-&quot; 1*30ALPHANUMSYM
       experimental-protocol     = &quot;x-&quot; 1*30ALPHANUMSYM
       iana-registered-service   = ALPHA *31ALPHANUMSYM
       iana-registered-protocol  = ALPHA *31ALPHANUMSYM
       ALPHA         =  %x41-5A / %x61-7A   ; A-Z / a-z
       DIGIT         =  %x30-39 ; 0-9
       SYM           =  %x2B / %x2D / %x2E  ; &quot;+&quot; / &quot;-&quot; / &quot;.&quot;
       ALPHANUMSYM   =  ALPHA / DIGIT / SYM
       ; The app-service and app-protocol tags are limited to 32
       ; characters and must start with an alphabetic character.
       ; The service-parms are considered case-insensitive.





<span class="grey">Jones, et al.                Standards Track                    [Page 3]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-4" id="page-4" href="https://tools.ietf.org/html/rfc6408#page-4" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc6408">RFC 6408</a>                 Diameter S-NAPTR Usage            November 2011</span>


   This specification refines the &quot;iana-registered-service&quot; tag
   definition for the discovery of Diameter agents supporting a specific
   Diameter application as defined below.

       iana-registered-service =/ aaa-service
       aaa-service             = &quot;aaa+ap&quot; appln-id
       appln-id                = 1*10DIGIT
                                 ; Application Identifier expressed as
                                 ; a decimal integer without leading
                                 ; zeros.

   The appln-id element is the Application Identifier used to identify a
   specific Diameter application.  The Diameter Application Identifier
   is a 32-bit unsigned integer, and values are allocated by IANA as
   defined in [<a href="https://tools.ietf.org/html/rfc3588" title="&quot;Diameter Base Protocol&quot;">RFC3588</a>].

   This specification also refines the &quot;iana-registered-protocol&quot; tag
   definition for the discovery of Diameter agents supporting a specific
   Diameter transport protocol as defined below.

       iana-registered-protocol =/ aaa-protocol
       aaa-protocol             = &quot;diameter.&quot; aaa-transport
       aaa-transport            = &quot;tcp&quot; / &quot;sctp&quot; / &quot;tls.tcp&quot;

   The S-NAPTR application protocol tags defined by this specification
   MUST NOT be parsed in any way by the querying application or
   resolver.  The delimiter (&quot;.&quot;) is present in the tag to improve
   readability and does not imply a structure or namespace of any kind.
   The choice of delimiter (&quot;.&quot;) for the application protocol tag
   follows the format of existing S-NAPTR application protocol tag
   registry entries, but this does not imply that it shares semantics
   with any other specifications that create registry entries with the
   same format.

   The S-NAPTR application service and application protocol tags defined
   by this specification are unrelated to the IANA &quot;Service Name and
   Transport Protocol Port Number Registry&quot; (see [<a href="https://tools.ietf.org/html/rfc6335" title="&quot;Internet Assigned Numbers Authority (IANA) Procedures for the Management of the Service Name and Transport Protocol Port Number Registry&quot;">RFC6335</a>]).

   The maximum length of the NAPTR service field is 256 octets,
   including a one-octet length field (see <a href="https://tools.ietf.org/html/rfc3403#section-4.1">Section&nbsp;4.1 of [RFC3403]</a> and
   <a href="https://tools.ietf.org/html/rfc1035#section-3.3">Section&nbsp;3.3 of [RFC1035]</a>).










<span class="grey">Jones, et al.                Standards Track                    [Page 4]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-5" id="page-5" href="https://tools.ietf.org/html/rfc6408#page-5" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc6408">RFC 6408</a>                 Diameter S-NAPTR Usage            November 2011</span>


<span class="h3"><h3><a class="selflink" name="section-3.1" href="https://tools.ietf.org/html/rfc6408#section-3.1">3.1</a>. IETF Standards Track Diameter Applications</h3></span>

   A Diameter agent MUST be capable of using the extended S-NAPTR
   application service tag for dynamic discovery of a Diameter agent
   supporting Standards Track applications.  Therefore, every IETF
   Standards Track Diameter application MUST be associated with a
   &quot;aaa-service&quot; tag formatted as defined in this specification and
   allocated in accordance with IANA policy (see <a href="https://tools.ietf.org/html/rfc6408#section-7">Section 7</a>).

   For example, a NAPTR service field value of:

      'aaa+ap6:diameter.sctp'

   means that the Diameter node in the SRV or A/AAAA record supports the
   Diameter Session Initiation Protocol (SIP) application ('6') and the
   Stream Control Transmission Protocol (SCTP) as the transport
   protocol.

<span class="h3"><h3><a class="selflink" name="section-3.2" href="https://tools.ietf.org/html/rfc6408#section-3.2">3.2</a>. Vendor-Specific Diameter Applications</h3></span>

   S-NAPTR application service and application protocol tag values can
   also be used to discover Diameter peers that support a vendor-
   specific Diameter application.  In this case, the vendor-specific
   Diameter application MUST be associated with a &quot;aaa-service&quot; tag
   formatted as defined in this specification and allocated in
   accordance with IANA policy (see <a href="https://tools.ietf.org/html/rfc6408#section-7">Section 7</a>).

   For example, a NAPTR service field value of:

      'aaa+ap16777251:diameter.sctp'

   means that the Diameter node in the SRV or A/AAAA record supports the
   Diameter Third Generation Partnership Project (3GPP) S6a application
   ('16777251') and SCTP as the transport protocol.

<span class="h2"><h2><a class="selflink" name="section-4" href="https://tools.ietf.org/html/rfc6408#section-4">4</a>. Backwards Compatibility</h2></span>

   Domain Name System (DNS) administrators SHOULD also provision legacy
   NAPTR records [<a href="https://tools.ietf.org/html/rfc3403" title="&quot;Dynamic Delegation Discovery System (DDDS) Part Three: The Domain Name System (DNS) Database&quot;">RFC3403</a>] in the <a href="https://tools.ietf.org/html/rfc3588">RFC 3588</a> style in order to guarantee
   backwards compatibility with legacy Diameter peers that are <a href="https://tools.ietf.org/html/rfc3588">RFC 3588</a>
   compliant.  If the DNS administrator provisions both extended S-NAPTR
   records as defined in this specification and legacy <a href="https://tools.ietf.org/html/rfc3588">RFC 3588</a> NAPTR
   records, then the extended S-NAPTR records MUST have higher priority
   (e.g., lower order and/or preference values) than legacy NAPTR
   records.






<span class="grey">Jones, et al.                Standards Track                    [Page 5]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-6" id="page-6" href="https://tools.ietf.org/html/rfc6408#page-6" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc6408">RFC 6408</a>                 Diameter S-NAPTR Usage            November 2011</span>


<span class="h2"><h2><a class="selflink" name="section-5" href="https://tools.ietf.org/html/rfc6408#section-5">5</a>. Extended NAPTR-Based Diameter Peer Discovery</h2></span>

   The Diameter Peer Discovery principles are described in <a href="https://tools.ietf.org/html/rfc3588#section-5.2">Section&nbsp;5.2
   of [RFC3588]</a>.  This specification updates the NAPTR query procedure
   in the Diameter peer discovery mechanism by allowing the querying
   node to determine which applications are supported by resolved
   Diameter peers.

   The extended-format NAPTR records provide a mapping from a domain to
   the SRV record or A/AAAA record for contacting a server supporting a
   specific transport protocol and Diameter application.  The resource
   record will contain an empty regular expression and a replacement
   value, which is the SRV record or the A/AAAA record for that
   particular transport protocol.

   The assumption for this mechanism to work is that the DNS
   administrator of the queried domain has first provisioned the DNS
   with extended-format NAPTR entries.  The steps below replace the
   NAPTR query procedure steps in <a href="https://tools.ietf.org/html/rfc3588#section-5.2">Section&nbsp;5.2 of [RFC3588]</a>.

   a. The Diameter implementation performs a NAPTR query for a server in
      a particular realm.  The Diameter implementation has to know in
      advance in which realm to look for a Diameter agent, and in which
      Application Identifier it is interested.  For example, the realm
      could be deduced from the Network Access Identifier (NAI) in the
      User-Name attribute-value pair (AVP) or extracted from the
      Destination-Realm AVP.

   b. If the returned NAPTR service fields contain entries formatted as
      &quot;aaa+apX:Y&quot; where &quot;X&quot; indicates the Application Identifier and &quot;Y&quot;
      indicates the supported transport protocol(s), the target realm
      supports the extended format for NAPTR-based Diameter peer
      discovery defined in this document.

         If &quot;X&quot; contains the required Application Identifier and &quot;Y&quot;
         matches a supported transport protocol, the Diameter
         implementation resolves the &quot;replacement&quot; field entry to a
         target host using the lookup method appropriate for the &quot;flags&quot;
         field.

         If &quot;X&quot; does not contain the required Application Identifier or
         &quot;Y&quot; does not match a supported transport protocol, the Diameter
         implementation abandons the peer discovery.








<span class="grey">Jones, et al.                Standards Track                    [Page 6]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-7" id="page-7" href="https://tools.ietf.org/html/rfc6408#page-7" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc6408">RFC 6408</a>                 Diameter S-NAPTR Usage            November 2011</span>


   c. If the returned NAPTR service fields contain entries formatted as
      &quot;aaa+apX&quot; where &quot;X&quot; indicates the Application Identifier, the
      target realm supports the extended format for NAPTR-based Diameter
      peer discovery defined in this document.

         If &quot;X&quot; contains the required Application Identifier, the
         Diameter implementation resolves the &quot;replacement&quot; field entry
         to a target host using the lookup method appropriate for the
         &quot;flags&quot; field and attempts to connect using all supported
         transport protocols following the order specified in
         <a href="https://tools.ietf.org/html/rfc3588#section-2.1">Section&nbsp;2.1 of [RFC3588]</a>.

         If &quot;X&quot; does not contain the required Application Identifier,
         the Diameter implementation abandons the peer discovery.

   d. If the returned NAPTR service fields contain entries formatted as
      &quot;aaa:X&quot; where &quot;X&quot; indicates the supported transport protocol(s),
      the target realm supports Diameter but does not support the
      extended format for NAPTR-based Diameter peer discovery defined in
      this document.

         If &quot;X&quot; matches a supported transport protocol, the Diameter
         implementation resolves the &quot;replacement&quot; field entry to a
         target host using the lookup method appropriate for the &quot;flags&quot;
         field.

   e. If the returned NAPTR service fields contain entries formatted as
      &quot;aaa&quot;, the target realm supports Diameter but does not support the
      extended format for NAPTR-based Diameter peer discovery defined in
      this document.  The Diameter implementation resolves the
      &quot;replacement&quot; field entry to a target host using the lookup method
      appropriate for the &quot;flags&quot; field and attempts to connect using
      all supported transport protocols following the order specified in
      <a href="https://tools.ietf.org/html/rfc3588#section-2.1">Section&nbsp;2.1 of [RFC3588]</a>.

   f. If the target realm does not support NAPTR-based Diameter peer
      discovery, the client proceeds with the next peer discovery
      mechanism described in <a href="https://tools.ietf.org/html/rfc3588#section-5.2">Section&nbsp;5.2 of [RFC3588]</a>.

<span class="h3"><h3><a class="selflink" name="section-5.1" href="https://tools.ietf.org/html/rfc6408#section-5.1">5.1</a>. Examples</h3></span>

   As an example, consider a client that wishes to discover a Diameter
   server in the ex1.example.com realm that supports the Credit Control
   application.  The client performs a NAPTR query for that domain, and
   the following NAPTR records are returned:






<span class="grey">Jones, et al.                Standards Track                    [Page 7]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-8" id="page-8" href="https://tools.ietf.org/html/rfc6408#page-8" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc6408">RFC 6408</a>                 Diameter S-NAPTR Usage            November 2011</span>


       ;;        order pref flags service   regexp replacement
       IN NAPTR  50    50   &quot;s&quot;   &quot;aaa:diameter.sctp&quot; &quot;&quot;
                    _diameter._sctp.ex1.example.com
       IN NAPTR  50    50   &quot;s&quot;   &quot;aaa+ap1:diameter.sctp&quot; &quot;&quot;
                    _diameter._sctp.ex1.example.com
       IN NAPTR  50    50   &quot;s&quot;   &quot;aaa+ap4:diameter.sctp&quot; &quot;&quot;
                    _diameter._sctp.ex1.example.com

   This indicates that the server supports NASREQ (ID=1) and Credit
   Control (ID=4) applications over SCTP.  If the client supports SCTP,
   it will be used, targeted to a host determined by an SRV lookup of
   _diameter._sctp.ex1.example.com.

   That SRV lookup would return:

       ;;       Priority  Weight  Port    Target
       IN SRV   0         1       3868    server1.ex1.example.com
       IN SRV   0         2       3868    server2.ex1.example.com

   As an alternative example, a client wishes to discover a Diameter
   server in the ex2.example.com realm that supports the NASREQ
   application over SCTP.  The client performs a NAPTR query for that
   domain, and the following NAPTR records are returned:

       ;;        order pref flags service   regexp replacement
       IN NAPTR  150   50   &quot;a&quot;   &quot;aaa:diameter.sctp&quot;  &quot;&quot;
                    server1.ex2.example.com
       IN NAPTR  150   50   &quot;a&quot;   &quot;aaa:diameter.tls.tcp&quot;  &quot;&quot;
                    server2.ex2.example.com
       IN NAPTR  150   50   &quot;a&quot;   &quot;aaa+ap1:diameter.sctp&quot;  &quot;&quot;
                    server1.ex2.example.com
       IN NAPTR  150   50   &quot;a&quot;   &quot;aaa+ap1:diameter.tls.tcp&quot;  &quot;&quot;
                    server2.ex2.example.com

   This indicates that the server supports NASREQ (ID=1) over SCTP and
   Transport Layer Security (TLS)/TCP via hosts server1.ex2.example.com
   and server2.ex2.example.com, respectively.

<span class="h2"><h2><a class="selflink" name="section-6" href="https://tools.ietf.org/html/rfc6408#section-6">6</a>. Usage Guidelines</h2></span>

   Diameter is a peer-to-peer protocol, whereas most of the applications
   that extend the base protocol behave like client/server applications.
   The role of the peer is not advertised in the NAPTR tags and not even
   communicated during Diameter capability negotiation
   (Capabilities-Exchange-Request and Capabilities-Exchange-Answer
   message exchange).  For this reason, NAPTR-based Diameter peer
   discovery for an application defining client/server roles should only
   be used by a client to discover servers.



<span class="grey">Jones, et al.                Standards Track                    [Page 8]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-9" id="page-9" href="https://tools.ietf.org/html/rfc6408#page-9" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc6408">RFC 6408</a>                 Diameter S-NAPTR Usage            November 2011</span>


<span class="h2"><h2><a class="selflink" name="section-7" href="https://tools.ietf.org/html/rfc6408#section-7">7</a>. IANA Considerations</h2></span>

<span class="h3"><h3><a class="selflink" name="section-7.1" href="https://tools.ietf.org/html/rfc6408#section-7.1">7.1</a>. IETF Diameter Application Service Tags</h3></span>

   IANA has reserved a value of &quot;aaa&quot; for Diameter in the &quot;(S-NAPTR)
   Application Service Tag&quot; registry created by [<a href="https://tools.ietf.org/html/rfc3958" title="&quot;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS)&quot;">RFC3958</a>].  IANA has
   also reserved the following S-NAPTR application service tags for
   existing IETF Diameter applications in the same registry.

             +------------------+----------------------------+
             | Tag              | Diameter Application       |
             +------------------+----------------------------+
             | aaa+ap1          | NASREQ [<a href="https://tools.ietf.org/html/rfc3588" title="&quot;Diameter Base Protocol&quot;">RFC3588</a>]           |
             | aaa+ap2          | Mobile IPv4 [<a href="https://tools.ietf.org/html/rfc4004" title="&quot;Diameter Mobile IPv4 Application&quot;">RFC4004</a>]      |
             | aaa+ap3          | Base Accounting [<a href="https://tools.ietf.org/html/rfc3588" title="&quot;Diameter Base Protocol&quot;">RFC3588</a>]  |
             | aaa+ap4          | Credit Control [<a href="https://tools.ietf.org/html/rfc4006" title="&quot;Diameter Credit-Control Application&quot;">RFC4006</a>]   |
             | aaa+ap5          | EAP [<a href="https://tools.ietf.org/html/rfc4072" title="&quot;Diameter Extensible Authentication Protocol (EAP) Application&quot;">RFC4072</a>]              |
             | aaa+ap6          | SIP [<a href="https://tools.ietf.org/html/rfc4740" title="&quot;Diameter Session Initiation Protocol (SIP) Application&quot;">RFC4740</a>]              |
             | aaa+ap7          | Mobile IPv6 IKE [<a href="https://tools.ietf.org/html/rfc5778" title="&quot;Diameter Mobile IPv6: Support for Home Agent to Diameter Server Interaction&quot;">RFC5778</a>]  |
             | aaa+ap8          | Mobile IPv6 Auth [<a href="https://tools.ietf.org/html/rfc5778" title="&quot;Diameter Mobile IPv6: Support for Home Agent to Diameter Server Interaction&quot;">RFC5778</a>] |
             | aaa+ap9          | QoS [<a href="https://tools.ietf.org/html/rfc5866" title="&quot;Diameter Quality-of-Service Application&quot;">RFC5866</a>]              |
             | aaa+ap4294967295 | Relay [<a href="https://tools.ietf.org/html/rfc3588" title="&quot;Diameter Base Protocol&quot;">RFC3588</a>]            |
             +------------------+----------------------------+

   Future IETF Diameter applications MUST reserve the S-NAPTR
   application service tag corresponding to the allocated Diameter
   Application ID as defined in <a href="https://tools.ietf.org/html/rfc6408#section-3">Section 3</a>.

<span class="h3"><h3><a class="selflink" name="section-7.2" href="https://tools.ietf.org/html/rfc6408#section-7.2">7.2</a>. 3GPP Diameter Application Service Tags</h3></span>

   IANA has reserved the following S-NAPTR application service tags for
   existing 3GPP Diameter applications in the &quot;S-NAPTR Application
   Service Tag&quot; registry created by [<a href="https://tools.ietf.org/html/rfc3958" title="&quot;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS)&quot;">RFC3958</a>].

                 +----------------+----------------------+
                 | Tag            | Diameter Application |
                 +----------------+----------------------+
                 | aaa+ap16777250 | 3GPP STa [<a href="https://tools.ietf.org/html/rfc6408#ref-TS29.273" title="&quot;3GPP TS 29.273; Technical Specification Group Core Network and Terminals; Evolved Packet System (EPS); 3GPP EPS AAA interfaces (Release 8)&quot;">TS29.273</a>]  |
                 | aaa+ap16777251 | 3GPP S6a [<a href="https://tools.ietf.org/html/rfc6408#ref-TS29.272" title="&quot;3GPP TS 29.272; Technical Specification Group Core Network and Terminals; Evolved Packet System (EPS); Mobility Management Entity (MME) and Serving GPRS Support Node (SGSN) Related Interfaces Based on Diameter Protocol (Release 8)&quot;">TS29.272</a>]  |
                 | aaa+ap16777264 | 3GPP SWm [<a href="https://tools.ietf.org/html/rfc6408#ref-TS29.273" title="&quot;3GPP TS 29.273; Technical Specification Group Core Network and Terminals; Evolved Packet System (EPS); 3GPP EPS AAA interfaces (Release 8)&quot;">TS29.273</a>]  |
                 | aaa+ap16777267 | 3GPP S9 [<a href="https://tools.ietf.org/html/rfc6408#ref-TS29.215" title="&quot;3GPP TS 29.215; Technical Specification Group Core Network and Terminals; Policy and Charging Control (PCC) over S9 reference point; Stage 3 (Release 8)&quot;">TS29.215</a>]   |
                 +----------------+----------------------+

   Future 3GPP Diameter applications can reserve entries in the &quot;S-NAPTR
   Application Service Tag&quot; registry created by [<a href="https://tools.ietf.org/html/rfc3958" title="&quot;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS)&quot;">RFC3958</a>] that
   correspond to the allocated Diameter Application IDs as defined in
   <a href="https://tools.ietf.org/html/rfc6408#section-3">Section 3</a>.




<span class="grey">Jones, et al.                Standards Track                    [Page 9]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-10" id="page-10" href="https://tools.ietf.org/html/rfc6408#page-10" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc6408">RFC 6408</a>                 Diameter S-NAPTR Usage            November 2011</span>


<span class="h3"><h3><a class="selflink" name="section-7.3" href="https://tools.ietf.org/html/rfc6408#section-7.3">7.3</a>. WiMAX Forum Diameter Application Service Tags</h3></span>

   IANA has reserved the following S-NAPTR application service tags for
   existing Worldwide Interoperability for Microwave Access (WiMAX)
   Forum Diameter applications in the &quot;S-NAPTR Application Service Tag&quot;
   registry created by [<a href="https://tools.ietf.org/html/rfc3958" title="&quot;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS)&quot;">RFC3958</a>].

   +----------------+--------------------------------------------------+
   | Tag            | Diameter Application                             |
   +----------------+--------------------------------------------------+
   | aaa+ap16777281 | WiMAX Network Access Authentication and          |
   |                | Authorization Diameter Application (WNAAADA)     |
   |                | [<a href="https://tools.ietf.org/html/rfc6408#ref-WiMAX-BASE" title="&quot;WMF-T33-001-R015v02 - WiMAX Forum(R) Network Architecture - Detailed Protocols and Procedures, Base Specification - Release 1.5&quot;">WiMAX-BASE</a>]                                     |
   | aaa+ap16777282 | WiMAX Network Accounting Diameter Application    |
   |                | (WNADA) [<a href="https://tools.ietf.org/html/rfc6408#ref-WiMAX-BASE" title="&quot;WMF-T33-001-R015v02 - WiMAX Forum(R) Network Architecture - Detailed Protocols and Procedures, Base Specification - Release 1.5&quot;">WiMAX-BASE</a>]                             |
   | aaa+ap16777283 | WiMAX MIP4 Diameter Application (WM4DA)          |
   |                | [<a href="https://tools.ietf.org/html/rfc6408#ref-WiMAX-BASE" title="&quot;WMF-T33-001-R015v02 - WiMAX Forum(R) Network Architecture - Detailed Protocols and Procedures, Base Specification - Release 1.5&quot;">WiMAX-BASE</a>]                                     |
   | aaa+ap16777284 | WiMAX MIP6 Diameter Application (WM6DA)          |
   |                | [<a href="https://tools.ietf.org/html/rfc6408#ref-WiMAX-BASE" title="&quot;WMF-T33-001-R015v02 - WiMAX Forum(R) Network Architecture - Detailed Protocols and Procedures, Base Specification - Release 1.5&quot;">WiMAX-BASE</a>]                                     |
   | aaa+ap16777285 | WiMAX DHCP Diameter Application (WDDA)           |
   |                | [<a href="https://tools.ietf.org/html/rfc6408#ref-WiMAX-BASE" title="&quot;WMF-T33-001-R015v02 - WiMAX Forum(R) Network Architecture - Detailed Protocols and Procedures, Base Specification - Release 1.5&quot;">WiMAX-BASE</a>]                                     |
   | aaa+ap16777286 | WiMAX Location Authentication Authorization      |
   |                | Diameter Application (WLAADA) [<a href="https://tools.ietf.org/html/rfc6408#ref-WiMAX-LBS" title="&quot;WMF-T33-110-R015v01 - WiMAX Forum(R) Network Architecture - Protocols and Procedures for Location Based Services - Release 1.5&quot;">WiMAX-LBS</a>]        |
   | aaa+ap16777287 | WiMAX Policy and Charging Control R3 Policies    |
   |                | Diameter Application (WiMAX PCC-R3-P)            |
   |                | [<a href="https://tools.ietf.org/html/rfc6408#ref-WiMAX-PCC" title="&quot;WMF-T33-109-R015v02 - WiMAX Forum(R) Network Architecture - Detailed Protocols and Procedures, Policy and Charging Control - Release 1.5&quot;">WiMAX-PCC</a>]                                      |
   | aaa+ap16777288 | WiMAX Policy and Charging Control R3 Offline     |
   |                | Charging Diameter Application (WiMAX PCC-R3-OFC) |
   |                | [<a href="https://tools.ietf.org/html/rfc6408#ref-WiMAX-PCC" title="&quot;WMF-T33-109-R015v02 - WiMAX Forum(R) Network Architecture - Detailed Protocols and Procedures, Policy and Charging Control - Release 1.5&quot;">WiMAX-PCC</a>]                                      |
   | aaa+ap16777289 | WiMAX Policy and Charging Control R3 Offline     |
   |                | Charging Prime Diameter Application (WiMAX       |
   |                | PCC-R3-OFC-PRIME) [<a href="https://tools.ietf.org/html/rfc6408#ref-WiMAX-PCC" title="&quot;WMF-T33-109-R015v02 - WiMAX Forum(R) Network Architecture - Detailed Protocols and Procedures, Policy and Charging Control - Release 1.5&quot;">WiMAX-PCC</a>]                    |
   | aaa+ap16777290 | WiMAX Policy and Charging Control R3 Online      |
   |                | Charging Diameter Application (WiMAX PCC-R3-OC)  |
   |                | [<a href="https://tools.ietf.org/html/rfc6408#ref-WiMAX-PCC" title="&quot;WMF-T33-109-R015v02 - WiMAX Forum(R) Network Architecture - Detailed Protocols and Procedures, Policy and Charging Control - Release 1.5&quot;">WiMAX-PCC</a>]                                      |
   +----------------+--------------------------------------------------+

   Future WiMAX Forum Diameter applications can reserve entries in the
   &quot;S-NAPTR Application Service Tag&quot; registry created by [<a href="https://tools.ietf.org/html/rfc3958" title="&quot;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS)&quot;">RFC3958</a>] that
   correspond to the allocated Diameter Application IDs as defined in
   <a href="https://tools.ietf.org/html/rfc6408#section-3">Section 3</a>.

<span class="h3"><h3><a class="selflink" name="section-7.4" href="https://tools.ietf.org/html/rfc6408#section-7.4">7.4</a>. Vendor-Specific Diameter Application Service Tags</h3></span>

   Vendor-Specific Diameter Application IDs are allocated by IANA
   according to the &quot;First Come First Served&quot; policy and do not require
   an IETF specification.  However, the S-NAPTR application service tag
   registry created by [<a href="https://tools.ietf.org/html/rfc3958" title="&quot;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS)&quot;">RFC3958</a>] defines a registration policy of



<span class="grey">Jones, et al.                Standards Track                   [Page 10]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-11" id="page-11" href="https://tools.ietf.org/html/rfc6408#page-11" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc6408">RFC 6408</a>                 Diameter S-NAPTR Usage            November 2011</span>


   &quot;Specification Required&quot; with a further stipulation that the
   &quot;specification&quot; is an RFC (of any category).  If a vendor-specific
   Diameter application requires the functionality defined in this
   document, an RFC of any category MUST be published that reserves the
   S-NAPTR Application Service Tag corresponding to the Vendor-Specific
   Diameter Application ID as defined in <a href="https://tools.ietf.org/html/rfc6408#section-3">Section 3</a>.

<span class="h3"><h3><a class="selflink" name="section-7.5" href="https://tools.ietf.org/html/rfc6408#section-7.5">7.5</a>. Diameter Application Protocol Tags</h3></span>

   IANA has reserved the following S-NAPTR Application Protocol Tags for
   the Diameter transport protocols in the &quot;S-NAPTR Application Protocol
   Tag&quot; registry created by [<a href="https://tools.ietf.org/html/rfc3958" title="&quot;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS)&quot;">RFC3958</a>].

                      +------------------+----------+
                      | Tag              | Protocol |
                      +------------------+----------+
                      | diameter.tcp     | TCP      |
                      | diameter.sctp    | SCTP     |
                      | diameter.tls.tcp | TLS/TCP  |
                      +------------------+----------+

   Future Diameter versions that introduce new transport protocols MUST
   reserve an appropriate S-NAPTR Application Protocol Tag in the
   &quot;S-NAPTR Application Protocol Tag&quot; registry created by [<a href="https://tools.ietf.org/html/rfc3958" title="&quot;Domain-Based Application Service Location Using SRV RRs and the Dynamic Delegation Discovery Service (DDDS)&quot;">RFC3958</a>].

<span class="h2"><h2><a class="selflink" name="section-8" href="https://tools.ietf.org/html/rfc6408#section-8">8</a>. Security Considerations</h2></span>

   This document specifies an enhancement to the NAPTR service field
   format defined in <a href="https://tools.ietf.org/html/rfc3588">RFC 3588</a> and also modifications to the NAPTR
   processing logic defined in <a href="https://tools.ietf.org/html/rfc3588">RFC 3588</a>.  The enhancement and
   modifications are based on the S-NAPTR, which is actually a
   simplification of the NAPTR, and therefore the same security
   considerations described in <a href="https://tools.ietf.org/html/rfc3588">RFC 3588</a> [<a href="https://tools.ietf.org/html/rfc3588" title="&quot;Diameter Base Protocol&quot;">RFC3588</a>] are applicable to this
   document.  No further extensions are required beyond the security
   mechanisms offered by <a href="https://tools.ietf.org/html/rfc3588">RFC 3588</a>.  However, a malicious host doing
   S-NAPTR queries learns applications supported by Diameter agents in a
   certain realm faster, which might help the malicious host to scan
   potential targets for an attack more efficiently when some
   applications have known vulnerabilities.

<span class="h2"><h2><a class="selflink" name="section-9" href="https://tools.ietf.org/html/rfc6408#section-9">9</a>. Acknowledgments</h2></span>

   We would like to thank Glen Zorn, Avi Lior, Itsuma Tanaka, Sebastien
   Decugis, Dan Romascanu, Adrian Farrel, David Harrington, Pete
   Resnick, Robert Sparks, Stephen Farrell, Wesley Eddy, Ralph Droms,
   and Joe Touch for their comprehensive review comments.





<span class="grey">Jones, et al.                Standards Track                   [Page 11]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-12" id="page-12" href="https://tools.ietf.org/html/rfc6408#page-12" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc6408">RFC 6408</a>                 Diameter S-NAPTR Usage            November 2011</span>


<span class="h2"><h2><a class="selflink" name="section-10" href="https://tools.ietf.org/html/rfc6408#section-10">10</a>. References</h2></span>

<span class="h3"><h3><a class="selflink" name="section-10.1" href="https://tools.ietf.org/html/rfc6408#section-10.1">10.1</a>. Normative References</h3></span>

   [<a name="ref-RFC1035" id="ref-RFC1035">RFC1035</a>]    Mockapetris, P., &quot;Domain names - implementation and
                specification&quot;, STD 13, <a href="https://tools.ietf.org/html/rfc1035">RFC 1035</a>, November 1987.

   [<a name="ref-RFC2119" id="ref-RFC2119">RFC2119</a>]    Bradner, S., &quot;Key words for use in RFCs to Indicate
                Requirement Levels&quot;, <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="https://tools.ietf.org/html/rfc2119">RFC 2119</a>, March 1997.

   [<a name="ref-RFC2782" id="ref-RFC2782">RFC2782</a>]    Gulbrandsen, A., Vixie, P., and L. Esibov, &quot;A DNS RR for
                specifying the location of services (DNS SRV)&quot;,
                <a href="https://tools.ietf.org/html/rfc2782">RFC 2782</a>, February 2000.

   [<a name="ref-RFC3403" id="ref-RFC3403">RFC3403</a>]    Mealling, M., &quot;Dynamic Delegation Discovery System
                (DDDS) Part Three: The Domain Name System (DNS)
                Database&quot;, <a href="https://tools.ietf.org/html/rfc3403">RFC 3403</a>, October 2002.

   [<a name="ref-RFC3588" id="ref-RFC3588">RFC3588</a>]    Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J.
                Arkko, &quot;Diameter Base Protocol&quot;, <a href="https://tools.ietf.org/html/rfc3588">RFC 3588</a>,
                September 2003.

   [<a name="ref-RFC3596" id="ref-RFC3596">RFC3596</a>]    Thomson, S., Huitema, C., Ksinant, V., and M. Souissi,
                &quot;DNS Extensions to Support IP Version 6&quot;, <a href="https://tools.ietf.org/html/rfc3596">RFC 3596</a>,
                October 2003.

   [<a name="ref-RFC3958" id="ref-RFC3958">RFC3958</a>]    Daigle, L. and A. Newton, &quot;Domain-Based Application
                Service Location Using SRV RRs and the Dynamic
                Delegation Discovery Service (DDDS)&quot;, <a href="https://tools.ietf.org/html/rfc3958">RFC 3958</a>,
                January 2005.

   [<a name="ref-RFC4004" id="ref-RFC4004">RFC4004</a>]    Calhoun, P., Johansson, T., Perkins, C., Hiller, T.,
                Ed., and P. McCann, &quot;Diameter Mobile IPv4 Application&quot;,
                <a href="https://tools.ietf.org/html/rfc4004">RFC 4004</a>, August 2005.

   [<a name="ref-RFC4006" id="ref-RFC4006">RFC4006</a>]    Hakala, H., Mattila, L., Koskinen, J-P., Stura, M., and
                J.  Loughney, &quot;Diameter Credit-Control Application&quot;,
                <a href="https://tools.ietf.org/html/rfc4006">RFC 4006</a>, August 2005.

   [<a name="ref-RFC4072" id="ref-RFC4072">RFC4072</a>]    Eronen, P., Ed., Hiller, T., and G. Zorn, &quot;Diameter
                Extensible Authentication Protocol (EAP) Application&quot;,
                <a href="https://tools.ietf.org/html/rfc4072">RFC 4072</a>, August 2005.

   [<a name="ref-RFC4740" id="ref-RFC4740">RFC4740</a>]    Garcia-Martin, M., Ed., Belinchon, M., Pallares-Lopez,
                M., Canales-Valenzuela, C., and K. Tammi, &quot;Diameter
                Session Initiation Protocol (SIP) Application&quot;,
                <a href="https://tools.ietf.org/html/rfc4740">RFC 4740</a>, November 2006.




<span class="grey">Jones, et al.                Standards Track                   [Page 12]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-13" id="page-13" href="https://tools.ietf.org/html/rfc6408#page-13" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc6408">RFC 6408</a>                 Diameter S-NAPTR Usage            November 2011</span>


   [<a name="ref-RFC5234" id="ref-RFC5234">RFC5234</a>]    Crocker, D., Ed., and P. Overell, &quot;Augmented BNF for
                Syntax Specifications: ABNF&quot;, STD 68, <a href="https://tools.ietf.org/html/rfc5234">RFC 5234</a>,
                January 2008.

   [<a name="ref-RFC5778" id="ref-RFC5778">RFC5778</a>]    Korhonen, J., Ed., Tschofenig, H., Bournelle, J.,
                Giaretta, G., and M. Nakhjiri, &quot;Diameter Mobile IPv6:
                Support for Home Agent to Diameter Server Interaction&quot;,
                <a href="https://tools.ietf.org/html/rfc5778">RFC 5778</a>, February 2010.

   [<a name="ref-RFC5866" id="ref-RFC5866">RFC5866</a>]    Sun, D., Ed., McCann, P., Tschofenig, H., Tsou, T.,
                Doria, A., and G. Zorn, Ed., &quot;Diameter
                Quality-of-Service Application&quot;, <a href="https://tools.ietf.org/html/rfc5866">RFC 5866</a>, May 2010.

   [<a name="ref-TS29.215" id="ref-TS29.215">TS29.215</a>]   3rd Generation Partnership Project, &quot;3GPP TS 29.215;
                Technical Specification Group Core Network and
                Terminals; Policy and Charging Control (PCC) over S9
                reference point; Stage 3 (Release 8)&quot;,
                &lt;<a href="http://www.3gpp.org/ftp/Specs/html-info/29215.htm">http://www.3gpp.org/ftp/Specs/html-info/29215.htm</a>&gt;.

   [<a name="ref-TS29.272" id="ref-TS29.272">TS29.272</a>]   3rd Generation Partnership Project, &quot;3GPP TS 29.272;
                Technical Specification Group Core Network and
                Terminals; Evolved Packet System (EPS); Mobility
                Management Entity (MME) and Serving GPRS Support Node
                (SGSN) Related Interfaces Based on Diameter Protocol
                (Release 8)&quot;,
                &lt;<a href="http://www.3gpp.org/ftp/Specs/html-info/29272.htm">http://www.3gpp.org/ftp/Specs/html-info/29272.htm</a>&gt;.

   [<a name="ref-TS29.273" id="ref-TS29.273">TS29.273</a>]   3rd Generation Partnership Project, &quot;3GPP TS 29.273;
                Technical Specification Group Core Network and
                Terminals; Evolved Packet System (EPS); 3GPP EPS AAA
                interfaces (Release 8)&quot;,
                &lt;<a href="http://www.3gpp.org/ftp/Specs/html-info/29273.htm">http://www.3gpp.org/ftp/Specs/html-info/29273.htm</a>&gt;.

   [<a name="ref-WiMAX-BASE" id="ref-WiMAX-BASE">WiMAX-BASE</a>] WiMAX Forum, &quot;WMF-T33-001-R015v02 - WiMAX Forum(R)
                Network Architecture - Detailed Protocols and
                Procedures, Base Specification - Release 1.5&quot;,
                &lt;<a href="http://www.wimaxforum.org/resources/documents/technical/T33">http://www.wimaxforum.org/resources/</a>
                <a href="http://www.wimaxforum.org/resources/documents/technical/T33">documents/technical/T33</a>&gt;.

   [<a name="ref-WiMAX-LBS" id="ref-WiMAX-LBS">WiMAX-LBS</a>]  WiMAX Forum, &quot;WMF-T33-110-R015v01 - WiMAX Forum(R)
                Network Architecture - Protocols and Procedures for
                Location Based Services - Release 1.5&quot;,
                &lt;<a href="http://www.wimaxforum.org/resources/documents/technical/T33">http://www.wimaxforum.org/resources/</a>
                <a href="http://www.wimaxforum.org/resources/documents/technical/T33">documents/technical/T33</a>&gt;.







<span class="grey">Jones, et al.                Standards Track                   [Page 13]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-14" id="page-14" href="https://tools.ietf.org/html/rfc6408#page-14" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc6408">RFC 6408</a>                 Diameter S-NAPTR Usage            November 2011</span>


   [<a name="ref-WiMAX-PCC" id="ref-WiMAX-PCC">WiMAX-PCC</a>]  WiMAX Forum, &quot;WMF-T33-109-R015v02 - WiMAX Forum(R)
                Network Architecture - Detailed Protocols and
                Procedures, Policy and Charging Control - Release 1.5&quot;,
                &lt;<a href="http://www.wimaxforum.org/resources/documents/technical/T33">http://www.wimaxforum.org/resources/</a>
                <a href="http://www.wimaxforum.org/resources/documents/technical/T33">documents/technical/T33</a>&gt;.

<span class="h3"><h3><a class="selflink" name="section-10.2" href="https://tools.ietf.org/html/rfc6408#section-10.2">10.2</a>. Informative References</h3></span>

   [<a name="ref-RFC6335" id="ref-RFC6335">RFC6335</a>]    Cotton, M., Eggert, L., Touch, J., Westerlund, M., and
                S. Cheshire, &quot;Internet Assigned Numbers Authority (IANA)
                Procedures for the Management of the Service Name and
                Transport Protocol Port Number Registry&quot;, <a href="https://tools.ietf.org/html/bcp165">BCP 165</a>,
                <a href="https://tools.ietf.org/html/rfc6335">RFC 6335</a>, August 2011.

Authors' Addresses

   Mark Jones
   Bridgewater Systems

   EMail: mark@azu.ca


   Jouni Korhonen
   Nokia Siemens Networks

   EMail: jouni.nospam@gmail.com


   Lionel Morand
   Orange Labs

   EMail: lionel.morand@orange.com



















Jones, et al.                Standards Track                   [Page 14]

</pre>
   <br /> 
   <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.127, available from <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a> </small></small></span> 
  </div> 
 </body>
</html>