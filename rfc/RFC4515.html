<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head profile="http://dublincore.org/documents/2008/08/04/dc-html/"> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta name="robots" content="index,follow" /> 
  <meta name="creator" content="rfcmarkup version 1.127" /> 
  <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" /> 
  <meta name="DC.Relation.Replaces" content="rfc2254" /> 
  <meta name="DC.Identifier" content="urn:ietf:rfc:4515" /> 
  <meta name="DC.Date.Issued" content="June, 2006" /> 
  <meta name="DC.Creator" content="Smith, Mark" /> 
  <meta name="DC.Creator" content="Howes, Tim" /> 
  <meta name="DC.Description.Abstract" content="Lightweight Directory Access Protocol (LDAP) search filters are
transmitted in the LDAP protocol using a binary representation that is
appropriate for use on the network. This document defines a human-
readable string representation of LDAP search filters that is
appropriate for use in LDAP URLs (RFC 4516) and in other applications.
[STANDARDS-TRACK]" /> 
  <meta name="DC.Title" content="Lightweight Directory Access Protocol (LDAP): String Representation of Search Filters" /> 
  <link rel="icon" href="/images/rfc.png" type="image/png" /> 
  <link rel="shortcut icon" href="/images/rfc.png" type="image/png" /> 
  <title>RFC 4515 - Lightweight Directory Access Protocol (LDAP): String Representation of Search Filters</title> 
  <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style> 
  <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]--> 
  <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script> 
 </head> 
 <body onload="addHeaderTags()"> 
  <div class="content"> 
   <div style="height: 13px;"> 
    <div onmouseover="this.style.cursor='pointer';" onclick="showElem('legend');" onmouseout="hideElem('legend')" style="height: 6px; position: absolute;" class="pre noprint docinfo bgblue" title="Click for colour legend."> 
    </div> 
    <div id="legend" class="docinfo noprint pre legend" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; " onmouseover="showElem('legend');" onmouseout="hideElem('legend');"> 
    </div> 
   </div> 
   <span class="pre noprint docinfo top">[<a href="https://tools.ietf.org/html/" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc4515.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc4515" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-ldapbis-filter" title="draft-ietf-ldapbis-filter">draft-ietf-ldap...</a>] [<a href="https://datatracker.ietf.org/doc/rfc4515" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc4515" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc4515" title="Side-by-side diff">Diff2</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=4515">Errata</a>]</span>
   <br /> 
   <span class="pre noprint docinfo"> </span>
   <br /> 
   <span class="pre noprint docinfo"> PROPOSED STANDARD</span>
   <br /> 
   <span class="pre noprint docinfo"> <span style="color: #C00;">Errata Exist</span></span>
   <br /> 
   <pre>Network Working Group                                      M. Smith, Ed.
Request for Comments: 4515                           Pearl Crescent, LLC
Obsoletes: <a href="https://tools.ietf.org/html/rfc2254">2254</a>                                                 T. Howes
Category: Standards Track                                  Opsware, Inc.
                                                               June 2006


             <span class="h1"><h1>Lightweight Directory Access Protocol (LDAP):</h1></span>
                <span class="h1"><h1>String Representation of Search Filters</h1></span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the &quot;Internet
   Official Protocol Standards&quot; (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2006).

Abstract

   Lightweight Directory Access Protocol (LDAP) search filters are
   transmitted in the LDAP protocol using a binary representation that
   is appropriate for use on the network.  This document defines a
   human-readable string representation of LDAP search filters that is
   appropriate for use in LDAP URLs (<a href="https://tools.ietf.org/html/rfc4516">RFC 4516</a>) and in other
   applications.

Table of Contents

   <a href="https://tools.ietf.org/html/rfc4515#section-1">1</a>. Introduction ....................................................<a href="https://tools.ietf.org/html/rfc4515#page-2">2</a>
   <a href="https://tools.ietf.org/html/rfc4515#section-2">2</a>. LDAP Search Filter Definition ...................................<a href="https://tools.ietf.org/html/rfc4515#page-2">2</a>
   <a href="https://tools.ietf.org/html/rfc4515#section-3">3</a>. String Search Filter Definition .................................<a href="https://tools.ietf.org/html/rfc4515#page-3">3</a>
   <a href="https://tools.ietf.org/html/rfc4515#section-4">4</a>. Examples ........................................................<a href="https://tools.ietf.org/html/rfc4515#page-5">5</a>
   <a href="https://tools.ietf.org/html/rfc4515#section-5">5</a>. Security Considerations .........................................<a href="https://tools.ietf.org/html/rfc4515#page-7">7</a>
   <a href="https://tools.ietf.org/html/rfc4515#section-6">6</a>. Normative References ............................................<a href="https://tools.ietf.org/html/rfc4515#page-7">7</a>
   <a href="https://tools.ietf.org/html/rfc4515#section-7">7</a>. Informative References ..........................................<a href="https://tools.ietf.org/html/rfc4515#page-8">8</a>
   <a href="https://tools.ietf.org/html/rfc4515#section-8">8</a>. Acknowledgements ................................................<a href="https://tools.ietf.org/html/rfc4515#page-8">8</a>
   <a href="https://tools.ietf.org/html/rfc4515#appendix-A">Appendix A</a>: Changes Since <a href="https://tools.ietf.org/html/rfc2254">RFC 2254</a> .................................<a href="https://tools.ietf.org/html/rfc4515#page-9">9</a>
      <a href="https://tools.ietf.org/html/rfc4515#appendix-A.1">A.1</a>. Technical Changes ..........................................<a href="https://tools.ietf.org/html/rfc4515#page-9">9</a>
      <a href="https://tools.ietf.org/html/rfc4515#appendix-A.2">A.2</a>. Editorial Changes ..........................................<a href="https://tools.ietf.org/html/rfc4515#page-9">9</a>







<span class="grey">Smith and Howes             Standards Track                     [Page 1]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-2" id="page-2" href="https://tools.ietf.org/html/rfc4515#page-2" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc4515">RFC 4515</a>     LDAP: String Representation of Search Filters     June 2006</span>


<span class="h2"><h2><a class="selflink" name="section-1" href="https://tools.ietf.org/html/rfc4515#section-1">1</a>. Introduction</h2></span>

   The Lightweight Directory Access Protocol (LDAP) [<a href="https://tools.ietf.org/html/rfc4510" title="&quot;Lightweight Directory Access Protocol (LDAP): Technical Specification Road Map&quot;">RFC4510</a>] defines a
   network representation of a search filter transmitted to an LDAP
   server.  Some applications may find it useful to have a common way of
   representing these search filters in a human-readable form; LDAP URLs
   [<a href="https://tools.ietf.org/html/rfc4516" title="&quot;Lightweight Directory Access Protocol (LDAP): Uniform Resource Locator&quot;">RFC4516</a>] are an example of one such application.  This document
   defines a human-readable string format for representing the full
   range of possible LDAP version 3 search filters, including extended
   match filters.

   This document is a integral part of the LDAP technical specification
   [<a href="https://tools.ietf.org/html/rfc4510" title="&quot;Lightweight Directory Access Protocol (LDAP): Technical Specification Road Map&quot;">RFC4510</a>], which obsoletes the previously defined LDAP technical
   specification, <a href="https://tools.ietf.org/html/rfc3377">RFC 3377</a>, in its entirety.

   This document replaces <a href="https://tools.ietf.org/html/rfc2254">RFC 2254</a>.  Changes to <a href="https://tools.ietf.org/html/rfc2254">RFC 2254</a> are summarized
   in <a href="https://tools.ietf.org/html/rfc4515#appendix-A">Appendix A</a>.

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this
   document are to be interpreted as described in <a href="https://tools.ietf.org/html/bcp14">BCP 14</a> [<a href="https://tools.ietf.org/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>].

<span class="h2"><h2><a class="selflink" name="section-2" href="https://tools.ietf.org/html/rfc4515#section-2">2</a>. LDAP Search Filter Definition</h2></span>

   An LDAP search filter is defined in <a href="https://tools.ietf.org/html/rfc4511#section-4.5.1">Section&nbsp;4.5.1 of [RFC4511]</a> as
   follows:

        Filter ::= CHOICE {
            and                [0] SET SIZE (1..MAX) OF filter Filter,
            or                 [1] SET SIZE (1..MAX) OF filter Filter,
            not                [2] Filter,
            equalityMatch      [3] AttributeValueAssertion,
            substrings         [4] SubstringFilter,
            greaterOrEqual     [5] AttributeValueAssertion,
            lessOrEqual        [6] AttributeValueAssertion,
            present            [7] AttributeDescription,
            approxMatch        [8] AttributeValueAssertion,
            extensibleMatch    [9] MatchingRuleAssertion }

        SubstringFilter ::= SEQUENCE {
            type    AttributeDescription,
            -- initial and final can occur at most once
            substrings    SEQUENCE SIZE (1..MAX) OF substring CHOICE {
             initial        [0] AssertionValue,
             any            [1] AssertionValue,
             final          [2] AssertionValue } }





<span class="grey">Smith and Howes             Standards Track                     [Page 2]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-3" id="page-3" href="https://tools.ietf.org/html/rfc4515#page-3" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc4515">RFC 4515</a>     LDAP: String Representation of Search Filters     June 2006</span>


        AttributeValueAssertion ::= SEQUENCE {
            attributeDesc   AttributeDescription,
            assertionValue  AssertionValue }

        MatchingRuleAssertion ::= SEQUENCE {
            matchingRule    [1] MatchingRuleId OPTIONAL,
            type            [2] AttributeDescription OPTIONAL,
            matchValue      [3] AssertionValue,
            dnAttributes    [4] BOOLEAN DEFAULT FALSE }

        AttributeDescription ::= LDAPString
                        -- Constrained to &lt;attributedescription&gt;
                        -- [<a href="https://tools.ietf.org/html/rfc4512" title="&quot;Lightweight Directory Access Protocol (LDAP): Directory Information Models&quot;">RFC4512</a>]

        AttributeValue ::= OCTET STRING

        MatchingRuleId ::= LDAPString

        AssertionValue ::= OCTET STRING

        LDAPString ::= OCTET STRING -- UTF-8 encoded,
                                    -- [<a href="https://tools.ietf.org/html/rfc4515#ref-Unicode" title="&quot;The Unicode Standard, Version 3.2.0&quot;">Unicode</a>] characters

   The AttributeDescription, as defined in [<a href="https://tools.ietf.org/html/rfc4511" title="&quot;Lightweight Directory Access Protocol (LDAP): The Protocol&quot;">RFC4511</a>], is a string
   representation of the attribute description that is discussed in
   [<a href="https://tools.ietf.org/html/rfc4512" title="&quot;Lightweight Directory Access Protocol (LDAP): Directory Information Models&quot;">RFC4512</a>].  The AttributeValue and AssertionValue OCTET STRING have
   the form defined in [<a href="https://tools.ietf.org/html/rfc4517" title="&quot;Lightweight Directory Access Protocol (LDAP): Syntaxes and Matching Rules&quot;">RFC4517</a>].  The Filter is encoded for
   transmission over a network using the Basic Encoding Rules (BER)
   defined in [<a href="https://tools.ietf.org/html/rfc4515#ref-X.690" title=" and Distinguished Encoding Rules">X.690</a>], with simplifications described in [<a href="https://tools.ietf.org/html/rfc4511" title="&quot;Lightweight Directory Access Protocol (LDAP): The Protocol&quot;">RFC4511</a>].

<span class="h2"><h2><a class="selflink" name="section-3" href="https://tools.ietf.org/html/rfc4515#section-3">3</a>. String Search Filter Definition</h2></span>

   The string representation of an LDAP search filter is a string of
   UTF-8 [<a href="https://tools.ietf.org/html/rfc3629" title="&quot;UTF-8, a transformation format of ISO 10646&quot;">RFC3629</a>] encoded Unicode characters [<a href="https://tools.ietf.org/html/rfc4515#ref-Unicode" title="&quot;The Unicode Standard, Version 3.2.0&quot;">Unicode</a>] that is defined
   by the following grammar, following the ABNF notation defined in
   [<a href="https://tools.ietf.org/html/rfc4234" title="&quot;Augmented BNF for Syntax Specifications: ABNF&quot;">RFC4234</a>].  The productions used that are not defined here are
   defined in <a href="https://tools.ietf.org/html/rfc4515#section-1.4">Section 1.4</a> (Common ABNF Productions) of [<a href="https://tools.ietf.org/html/rfc4512" title="&quot;Lightweight Directory Access Protocol (LDAP): Directory Information Models&quot;">RFC4512</a>] unless
   otherwise noted.  The filter format uses a prefix notation.

      filter         = LPAREN filtercomp RPAREN
      filtercomp     = and / or / not / item
      and            = AMPERSAND filterlist
      or             = VERTBAR filterlist
      not            = EXCLAMATION filter
      filterlist     = 1*filter
      item           = simple / present / substring / extensible
      simple         = attr filtertype assertionvalue
      filtertype     = equal / approx / greaterorequal / lessorequal



<span class="grey">Smith and Howes             Standards Track                     [Page 3]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-4" id="page-4" href="https://tools.ietf.org/html/rfc4515#page-4" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc4515">RFC 4515</a>     LDAP: String Representation of Search Filters     June 2006</span>


      equal          = EQUALS
      approx         = TILDE EQUALS
      greaterorequal = RANGLE EQUALS
      lessorequal    = LANGLE EQUALS
      extensible     = ( attr [dnattrs]
                           [matchingrule] COLON EQUALS assertionvalue )
                       / ( [dnattrs]
                            matchingrule COLON EQUALS assertionvalue )
      present        = attr EQUALS ASTERISK
      substring      = attr EQUALS [initial] any [final]
      initial        = assertionvalue
      any            = ASTERISK *(assertionvalue ASTERISK)
      final          = assertionvalue
      attr           = attributedescription
                         ; The attributedescription rule is defined in
                         ; <a href="https://tools.ietf.org/html/rfc4512#section-2.5">Section&nbsp;2.5 of [RFC4512]</a>.
      dnattrs        = COLON &quot;dn&quot;
      matchingrule   = COLON oid
      assertionvalue = valueencoding
      ; The &lt;valueencoding&gt; rule is used to encode an &lt;AssertionValue&gt;
      ; from <a href="https://tools.ietf.org/html/rfc4511#section-4.1.6">Section&nbsp;4.1.6 of [RFC4511]</a>.
      valueencoding  = 0*(normal / escaped)
      normal         = UTF1SUBSET / UTFMB
      escaped        = ESC HEX HEX
      UTF1SUBSET     = %x01-27 / %x2B-5B / %x5D-7F
                          ; UTF1SUBSET excludes 0x00 (NUL), LPAREN,
                          ; RPAREN, ASTERISK, and ESC.
      EXCLAMATION    = %x21 ; exclamation mark (&quot;!&quot;)
      AMPERSAND      = %x26 ; ampersand (or AND symbol) (&quot;&amp;&quot;)
      ASTERISK       = %x2A ; asterisk (&quot;*&quot;)
      COLON          = %x3A ; colon (&quot;:&quot;)
      VERTBAR        = %x7C ; vertical bar (or pipe) (&quot;|&quot;)
      TILDE          = %x7E ; tilde (&quot;~&quot;)

   Note that although both the &lt;substring&gt; and &lt;present&gt; productions in
   the grammar above can produce the &quot;attr=*&quot; construct, this construct
   is used only to denote a presence filter.

   The &lt;valueencoding&gt; rule ensures that the entire filter string is a
   valid UTF-8 string and provides that the octets that represent the
   ASCII characters &quot;*&quot; (ASCII 0x2a), &quot;(&quot; (ASCII 0x28), &quot;)&quot; (ASCII
   0x29), &quot;\&quot; (ASCII 0x5c), and NUL (ASCII 0x00) are represented as a
   backslash &quot;\&quot; (ASCII 0x5c) followed by the two hexadecimal digits
   representing the value of the encoded octet.







<span class="grey">Smith and Howes             Standards Track                     [Page 4]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-5" id="page-5" href="https://tools.ietf.org/html/rfc4515#page-5" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc4515">RFC 4515</a>     LDAP: String Representation of Search Filters     June 2006</span>


   This simple escaping mechanism eliminates filter-parsing ambiguities
   and allows any filter that can be represented in LDAP to be
   represented as a NUL-terminated string.  Other octets that are part
   of the &lt;normal&gt; set may be escaped using this mechanism, for example,
   non-printing ASCII characters.

   For AssertionValues that contain UTF-8 character data, each octet of
   the character to be escaped is replaced by a backslash and two hex
   digits, which form a single octet in the code of the character.  For
   example, the filter checking whether the &quot;cn&quot; attribute contained a
   value with the character &quot;*&quot; anywhere in it would be represented as
   &quot;(cn=*\2a*)&quot;.

   As indicated by the &lt;valueencoding&gt; rule, implementations MUST escape
   all octets greater than 0x7F that are not part of a valid UTF-8
   encoding sequence when they generate a string representation of a
   search filter.  Implementations SHOULD accept as input strings that
   are not valid UTF-8 strings.  This is necessary because <a href="https://tools.ietf.org/html/rfc2254">RFC 2254</a> did
   not clearly define the term &quot;string representation&quot; (and in
   particular did not mention that the string representation of an LDAP
   search filter is a string of UTF-8-encoded Unicode characters).

<span class="h2"><h2><a class="selflink" name="section-4" href="https://tools.ietf.org/html/rfc4515#section-4">4</a>. Examples</h2></span>

   This section gives a few examples of search filters written using
   this notation.

        (cn=Babs Jensen)
        (!(cn=Tim Howes))
        (&amp;(objectClass=Person)(|(sn=Jensen)(cn=Babs J*)))
        (o=univ*of*mich*)
        (seeAlso=)

   The following examples illustrate the use of extensible matching.

        (cn:caseExactMatch:=Fred Flintstone)
        (cn:=Betty Rubble)
        (sn:dn:2.4.6.8.10:=Barney Rubble)
        (o:dn:=Ace Industry)
        (:1.2.3:=Wilma Flintstone)
        (:DN:2.4.6.8.10:=Dino)

   The first example shows use of the matching rule &quot;caseExactMatch.&quot;

   The second example demonstrates use of a MatchingRuleAssertion form
   without a matchingRule.





<span class="grey">Smith and Howes             Standards Track                     [Page 5]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-6" id="page-6" href="https://tools.ietf.org/html/rfc4515#page-6" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc4515">RFC 4515</a>     LDAP: String Representation of Search Filters     June 2006</span>


   The third example illustrates the use of the &quot;:oid&quot; notation to
   indicate that the matching rule identified by the OID &quot;2.4.6.8.10&quot;
   should be used when making comparisons, and that the attributes of an
   entry's distinguished name should be considered part of the entry
   when evaluating the match (indicated by the use of &quot;:dn&quot;).

   The fourth example denotes an equality match, except that DN
   components should be considered part of the entry when doing the
   match.

   The fifth example is a filter that should be applied to any attribute
   supporting the matching rule given (since the &lt;attr&gt; has been
   omitted).

   The sixth and final example is also a filter that should be applied
   to any attribute supporting the matching rule given.  Attributes
   supporting the matching rule contained in the DN should also be
   considered.

   The following examples illustrate the use of the escaping mechanism.

        (o=Parens R Us \28for all your parenthetical needs\29)
        (cn=*\2A*)
        (filename=C:\5cMyFile)
        (bin=\00\00\00\04)
        (sn=Lu\c4\8di\c4\87)
        (1.3.6.1.4.1.1466.0=\04\02\48\69)

   The first example shows the use of the escaping mechanism to
   represent parenthesis characters.  The second shows how to represent
   a &quot;*&quot; in an assertion value, preventing it from being interpreted as
   a substring indicator.  The third illustrates the escaping of the
   backslash character.

   The fourth example shows a filter searching for the four-octet value
   00 00 00 04 (hex), illustrating the use of the escaping mechanism to
   represent arbitrary data, including NUL characters.

   The fifth example illustrates the use of the escaping mechanism to
   represent various non-ASCII UTF-8 characters.  Specifically, there
   are 5 characters in the &lt;assertionvalue&gt; portion of this example:
   LATIN CAPITAL LETTER L (U+004C), LATIN SMALL LETTER U (U+0075), LATIN
   SMALL LETTER C WITH CARON (U+010D), LATIN SMALL LETTER I (U+0069),
   and LATIN SMALL LETTER C WITH ACUTE (U+0107).

   The sixth and final example demonstrates assertion of a BER-encoded
   value.




<span class="grey">Smith and Howes             Standards Track                     [Page 6]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-7" id="page-7" href="https://tools.ietf.org/html/rfc4515#page-7" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc4515">RFC 4515</a>     LDAP: String Representation of Search Filters     June 2006</span>


<span class="h2"><h2><a class="selflink" name="section-5" href="https://tools.ietf.org/html/rfc4515#section-5">5</a>. Security Considerations</h2></span>

   This memo describes a string representation of LDAP search filters.
   While the representation itself has no known security implications,
   LDAP search filters do.  They are interpreted by LDAP servers to
   select entries from which data is retrieved.  LDAP servers should
   take care to protect the data they maintain from unauthorized access.

   Please refer to the Security Considerations sections of [<a href="https://tools.ietf.org/html/rfc4511" title="&quot;Lightweight Directory Access Protocol (LDAP): The Protocol&quot;">RFC4511</a>] and
   [<a href="https://tools.ietf.org/html/rfc4513" title="&quot;Lightweight Directory Access Protocol (LDAP): Authentication Methods and Security Mechanisms&quot;">RFC4513</a>] for more information.

<span class="h2"><h2><a class="selflink" name="section-6" href="https://tools.ietf.org/html/rfc4515#section-6">6</a>. Normative References</h2></span>

   [<a name="ref-RFC2119" id="ref-RFC2119">RFC2119</a>]   Bradner, S., &quot;Key words for use in RFCs to Indicate
               Requirement Levels&quot;, <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="https://tools.ietf.org/html/rfc2119">RFC 2119</a>, March 1997.

   [<a name="ref-RFC3629" id="ref-RFC3629">RFC3629</a>]   Yergeau, F., &quot;UTF-8, a transformation format of ISO
               10646&quot;, STD 63, <a href="https://tools.ietf.org/html/rfc3629">RFC 3629</a>, November 2003.

   [<a name="ref-RFC4234" id="ref-RFC4234">RFC4234</a>]   Crocker, D. and P. Overell, &quot;Augmented BNF for Syntax
               Specifications: ABNF&quot;, <a href="https://tools.ietf.org/html/rfc4234">RFC 4234</a>, October 2005.

   [<a name="ref-RFC4510" id="ref-RFC4510">RFC4510</a>]   Zeilenga, K., Ed., &quot;Lightweight Directory Access Protocol
               (LDAP): Technical Specification Road Map&quot;, <a href="https://tools.ietf.org/html/rfc4510">RFC 4510</a>, June
               2006.

   [<a name="ref-RFC4511" id="ref-RFC4511">RFC4511</a>]   Sermersheim, J., Ed., &quot;Lightweight Directory Access
               Protocol (LDAP): The Protocol&quot;, <a href="https://tools.ietf.org/html/rfc4511">RFC 4511</a>, June 2006.

   [<a name="ref-RFC4512" id="ref-RFC4512">RFC4512</a>]   Zeilenga, K., &quot;Lightweight Directory Access Protocol
               (LDAP): Directory Information Models&quot;, <a href="https://tools.ietf.org/html/rfc4512">RFC 4512</a>, June
               2006.

   [<a name="ref-RFC4513" id="ref-RFC4513">RFC4513</a>]   Harrison, R., Ed., &quot;Lightweight Directory Access Protocol
               (LDAP): Authentication Methods and Security Mechanisms&quot;,
               <a href="https://tools.ietf.org/html/rfc4513">RFC 4513</a>, June 2006.

   [<a name="ref-RFC4517" id="ref-RFC4517">RFC4517</a>]   Legg, S., Ed., &quot;Lightweight Directory Access Protocol
               (LDAP): Syntaxes and Matching Rules&quot;, <a href="https://tools.ietf.org/html/rfc4517">RFC 4517</a>, June
               2006.

   [<a name="ref-Unicode" id="ref-Unicode">Unicode</a>]   The Unicode Consortium, &quot;The Unicode Standard, Version
               3.2.0&quot; is defined by &quot;The Unicode Standard, Version 3.0&quot;
               (Reading, MA, Addison-Wesley, 2000. ISBN 0-201-61633-5),
               as amended by the &quot;Unicode Standard Annex #27: Unicode
               3.1&quot; (<a href="http://www.unicode.org/reports/tr27/">http://www.unicode.org/reports/tr27/</a>) and by the
               &quot;Unicode Standard Annex #28: Unicode 3.2.&quot;




<span class="grey">Smith and Howes             Standards Track                     [Page 7]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-8" id="page-8" href="https://tools.ietf.org/html/rfc4515#page-8" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc4515">RFC 4515</a>     LDAP: String Representation of Search Filters     June 2006</span>


<span class="h2"><h2><a class="selflink" name="section-7" href="https://tools.ietf.org/html/rfc4515#section-7">7</a>. Informative References</h2></span>

   [<a name="ref-RFC4516" id="ref-RFC4516">RFC4516</a>]   Smith, M., Ed. and T. Howes, &quot;Lightweight Directory
               Access Protocol (LDAP): Uniform Resource Locator&quot;, <a href="https://tools.ietf.org/html/rfc4516">RFC</a>
               <a href="https://tools.ietf.org/html/rfc4516">4516</a>, June 2006.

   [<a name="ref-X.690" id="ref-X.690">X.690</a>]     Specification of ASN.1 encoding rules: Basic, Canonical,
               and Distinguished Encoding Rules, ITU-T Recommendation
               X.690, 1994.

<span class="h2"><h2><a class="selflink" name="section-8" href="https://tools.ietf.org/html/rfc4515#section-8">8</a>. Acknowledgements</h2></span>

   This document replaces <a href="https://tools.ietf.org/html/rfc2254">RFC 2254</a> by Tim Howes.  <a href="https://tools.ietf.org/html/rfc2254">RFC 2254</a> was a product
   of the IETF ASID Working Group.

   Changes included in this revised specification are based upon
   discussions among the authors, discussions within the LDAP (v3)
   Revision Working Group (ldapbis), and discussions within other IETF
   Working Groups.  The contributions of individuals in these working
   groups is gratefully acknowledged.































<span class="grey">Smith and Howes             Standards Track                     [Page 8]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-9" id="page-9" href="https://tools.ietf.org/html/rfc4515#page-9" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc4515">RFC 4515</a>     LDAP: String Representation of Search Filters     June 2006</span>


Appendix A: Changes Since <a href="https://tools.ietf.org/html/rfc2254">RFC 2254</a>

<span class="h3"><h3><a class="selflink" name="appendix-A.1" href="https://tools.ietf.org/html/rfc4515#appendix-A.1">A.1</a>. Technical Changes</h3></span>

   Replaced [ISO 10646] reference with [<a href="https://tools.ietf.org/html/rfc4515#ref-Unicode" title="&quot;The Unicode Standard, Version 3.2.0&quot;">Unicode</a>].

   The following technical changes were made to the contents of the
   &quot;String Search Filter Definition&quot; section:

   Added statement that the string representation is a string of UTF-8-
   encoded Unicode characters.

   Revised all of the ABNF to use common productions from [<a href="https://tools.ietf.org/html/rfc4512" title="&quot;Lightweight Directory Access Protocol (LDAP): Directory Information Models&quot;">RFC4512</a>].

   Replaced the &quot;value&quot; rule with a new &quot;assertionvalue&quot; rule within the
   &quot;simple&quot;, &quot;extensible&quot;, and &quot;substring&quot; (&quot;initial&quot;, &quot;any&quot;, and
   &quot;final&quot;) rules.  This matches a change made in [<a href="https://tools.ietf.org/html/rfc4517" title="&quot;Lightweight Directory Access Protocol (LDAP): Syntaxes and Matching Rules&quot;">RFC4517</a>].

   Added &quot;(&quot; and &quot;)&quot; around the components of the &lt;extensible&gt;
   subproductions for clarity.

   Revised the &quot;attr&quot;, &quot;matchingrule&quot;, and &quot;assertionvalue&quot; ABNF to more
   precisely reference productions from the [<a href="https://tools.ietf.org/html/rfc4512" title="&quot;Lightweight Directory Access Protocol (LDAP): Directory Information Models&quot;">RFC4512</a>] and [<a href="https://tools.ietf.org/html/rfc4511" title="&quot;Lightweight Directory Access Protocol (LDAP): The Protocol&quot;">RFC4511</a>]
   documents.

   &quot;String Search Filter Definition&quot; section: replaced &quot;greater&quot; and
   &quot;less&quot; with &quot;greaterorequal&quot; and &quot;lessorequal&quot; to avoid confusion.

   Introduced the &quot;valueencoding&quot; and associated &quot;normal&quot; and &quot;escaped&quot;
   rules to reduce the dependence on descriptive text.  The &quot;normal&quot;
   production restricts filter strings to valid UTF-8 sequences.

   Added a statement about expected behavior in light of <a href="https://tools.ietf.org/html/rfc2254">RFC 2254</a>'s lack
   of a clear definition of &quot;string representation.&quot;

<span class="h3"><h3><a class="selflink" name="appendix-A.2" href="https://tools.ietf.org/html/rfc4515#appendix-A.2">A.2</a>. Editorial Changes</h3></span>

   Changed document title to include &quot;LDAP:&quot; prefix.

   IESG Note: removed note about lack of satisfactory mandatory
   authentication mechanisms.

   Header and &quot;Authors' Addresses&quot; sections: added Mark Smith as the
   document editor and updated affiliation and contact information.

   &quot;Table of Contents&quot; and &quot;Intellectual Property&quot; sections: added.

   Copyright: updated per latest IETF guidelines.



<span class="grey">Smith and Howes             Standards Track                     [Page 9]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-10" id="page-10" href="https://tools.ietf.org/html/rfc4515#page-10" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc4515">RFC 4515</a>     LDAP: String Representation of Search Filters     June 2006</span>


   &quot;Abstract&quot; section: separated from introductory material.

   &quot;Introduction&quot; section: new section; separated from the Abstract.
   Updated second paragraph to indicate that <a href="https://tools.ietf.org/html/rfc2254">RFC 2254</a> is replaced by
   this document (instead of <a href="https://tools.ietf.org/html/rfc1960">RFC 1960</a>).  Added reference to the
   [<a href="https://tools.ietf.org/html/rfc4510" title="&quot;Lightweight Directory Access Protocol (LDAP): Technical Specification Road Map&quot;">RFC4510</a>] document.

   &quot;LDAP Search Filter Definition&quot; section: made corrections to the LDAP
   search filter ABNF so it matches that used in [<a href="https://tools.ietf.org/html/rfc4511" title="&quot;Lightweight Directory Access Protocol (LDAP): The Protocol&quot;">RFC4511</a>].

   Clarified the definition of 'value' (now 'assertionvalue') to take
   into account the fact that it is not precisely an AttributeAssertion
   from <a href="https://tools.ietf.org/html/rfc4511#section-4.1.6">[RFC4511] Section&nbsp;4.1.6</a> (special handling is required for some
   characters).  Added a note that each octet of a character to be
   escaped is replaced by a backslash and two hex digits, which
   represent a single octet.

   &quot;Examples&quot; section: added four additional examples: (seeAlso=),
   (cn:=Betty Rubble), (:1.2.3:=Wilma Flintstone), and
   (1.3.6.1.4.1.1466.0=\04\02\48\69).  Replaced one occurrence of &quot;a
   value&quot; with &quot;an assertion value&quot;.  Corrected the description of this
   example: (sn:dn:2.4.6.8.10:=Barney Rubble).  Replaced the numeric OID
   in the first extensible match example with &quot;caseExactMatch&quot; to
   demonstrate use of the descriptive form.  Used &quot;DN&quot; (uppercase) in
   the last extensible match example to remind the reader to treat the
   &lt;dnattrs&gt; production as case insensitive.  Reworded the description
   of the fourth escaping mechanism example to avoid making assumptions
   about byte order.  Added text to the fifth escaping mechanism example
   to spell out what the non-ASCII characters are in Unicode terms.

   &quot;Security Considerations&quot; section: added references to [<a href="https://tools.ietf.org/html/rfc4511" title="&quot;Lightweight Directory Access Protocol (LDAP): The Protocol&quot;">RFC4511</a>] and
   [<a href="https://tools.ietf.org/html/rfc4513" title="&quot;Lightweight Directory Access Protocol (LDAP): Authentication Methods and Security Mechanisms&quot;">RFC4513</a>].

   &quot;Normative References&quot; section: renamed from &quot;References&quot; per new RFC
   guidelines.  Changed from [1] style to [<a href="https://tools.ietf.org/html/rfc4511" title="&quot;Lightweight Directory Access Protocol (LDAP): The Protocol&quot;">RFC4511</a>] style throughout the
   document.  Added entries for [<a href="https://tools.ietf.org/html/rfc4515#ref-Unicode" title="&quot;The Unicode Standard, Version 3.2.0&quot;">Unicode</a>], [<a href="https://tools.ietf.org/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>], [<a href="https://tools.ietf.org/html/rfc4513" title="&quot;Lightweight Directory Access Protocol (LDAP): Authentication Methods and Security Mechanisms&quot;">RFC4513</a>],
   [<a href="https://tools.ietf.org/html/rfc4512" title="&quot;Lightweight Directory Access Protocol (LDAP): Directory Information Models&quot;">RFC4512</a>], and [<a href="https://tools.ietf.org/html/rfc4510" title="&quot;Lightweight Directory Access Protocol (LDAP): Technical Specification Road Map&quot;">RFC4510</a>] and updated the UTF-8 reference.  Replaced
   <a href="https://tools.ietf.org/html/rfc822">RFC 822</a> reference with a reference to <a href="https://tools.ietf.org/html/rfc4234">RFC 4234</a>.

   &quot;Informative References&quot; section: (new section) moved [<a href="https://tools.ietf.org/html/rfc4515#ref-X.690" title=" and Distinguished Encoding Rules">X.690</a>] to this
   section.  Added a reference to [<a href="https://tools.ietf.org/html/rfc4516" title="&quot;Lightweight Directory Access Protocol (LDAP): Uniform Resource Locator&quot;">RFC4516</a>].

   &quot;Acknowledgements&quot; section: added.

   &quot;Appendix A: Changes Since <a href="https://tools.ietf.org/html/rfc2254">RFC 2254</a>&quot; section: added.

   Surrounded the names of all ABNF productions with &quot;&lt;&quot; and &quot;&gt;&quot; where
   they are used in descriptive text.



<span class="grey">Smith and Howes             Standards Track                    [Page 10]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-11" id="page-11" href="https://tools.ietf.org/html/rfc4515#page-11" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc4515">RFC 4515</a>     LDAP: String Representation of Search Filters     June 2006</span>


   Replaced all occurrences of &quot;LDAPv3&quot; with &quot;LDAP.&quot;

Authors' Addresses

   Mark Smith, Editor
   Pearl Crescent, LLC
   447 Marlpool Dr.
   Saline, MI 48176
   USA

   Phone: +1 734 944-2856
   EMail: mcs@pearlcrescent.com


   Tim Howes
   Opsware, Inc.
   599 N. Mathilda Ave.
   Sunnyvale, CA 94085
   USA

   Phone: +1 408 744-7509
   EMail: howes@opsware.com





























<span class="grey">Smith and Howes             Standards Track                    [Page 11]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-12" id="page-12" href="https://tools.ietf.org/html/rfc4515#page-12" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc4515">RFC 4515</a>     LDAP: String Representation of Search Filters     June 2006</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2006).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   &quot;AS IS&quot; basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).







Smith and Howes             Standards Track                    [Page 12]

</pre>
   <br /> 
   <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.127, available from <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a> </small></small></span> 
  </div> 
 </body>
</html>