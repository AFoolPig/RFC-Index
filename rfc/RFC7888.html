<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head profile="http://dublincore.org/documents/2008/08/04/dc-html/"> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta name="robots" content="index,follow" /> 
  <meta name="creator" content="rfcmarkup version 1.127" /> 
  <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" /> 
  <meta name="DC.Relation.Replaces" content="rfc2088" /> 
  <meta name="DC.Identifier" content="urn:ietf:rfc:7888" /> 
  <meta name="DC.Date.Issued" content="May, 2016" /> 
  <meta name="DC.Creator" content="Alexey Melnikov &lt;alexey.melnikov@isode.com&gt;" /> 
  <meta name="DC.Description.Abstract" content="The Internet Message Access Protocol (RFC 3501) contains the &quot;literal&quot;
syntactic construct for communicating strings. When sending a literal
from client to server, IMAP requires the client to wait for the server
to send a command continuation request between sending the octet count
and the string data. This document specifies an alternate form of
literal that does not require this network round trip.  This document
specifies 2 IMAP extensions: LITERAL+ and LITERAL-. LITERAL+ allows
the alternate form of literals in all IMAP commands. LITERAL- is the
same as LITERAL+, but it disallows the alternate form of literals
unless they are 4096 bytes or less.  This document obsoletes RFC 2088." /> 
  <meta name="DC.Title" content="IMAP4 Non-synchronizing Literals" /> 
  <link rel="icon" href="/images/rfc.png" type="image/png" /> 
  <link rel="shortcut icon" href="/images/rfc.png" type="image/png" /> 
  <title>RFC 7888 - IMAP4 Non-synchronizing Literals</title> 
  <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style> 
  <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]--> 
  <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script> 
 </head> 
 <body onload="addHeaderTags()"> 
  <div class="content"> 
   <div style="height: 13px;"> 
    <div onmouseover="this.style.cursor='pointer';" onclick="showElem('legend');" onmouseout="hideElem('legend')" style="height: 6px; position: absolute;" class="pre noprint docinfo bgblue" title="Click for colour legend."> 
    </div> 
    <div id="legend" class="docinfo noprint pre legend" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; " onmouseover="showElem('legend');" onmouseout="hideElem('legend');"> 
    </div> 
   </div> 
   <span class="pre noprint docinfo top">[<a href="https://tools.ietf.org/html/" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc7888.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc7888" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-imapapnd-rfc2088bis" title="draft-ietf-imapapnd-rfc2088bis">draft-ietf-imap...</a>] [<a href="https://datatracker.ietf.org/doc/rfc7888" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc7888" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc7888" title="Side-by-side diff">Diff2</a>] </span>
   <br /> 
   <span class="pre noprint docinfo"> </span>
   <br /> 
   <span class="pre noprint docinfo"> PROPOSED STANDARD</span>
   <br /> 
   <span class="pre noprint docinfo"> </span>
   <br /> 
   <pre>Internet Engineering Task Force (IETF)                  A. Melnikov, Ed.
Request for Comments: 7888                                     Isode Ltd
Obsoletes: <a href="https://tools.ietf.org/html/rfc2088">2088</a>                                                 May 2016
Category: Standards Track
ISSN: 2070-1721


                    <span class="h1"><h1>IMAP4 Non-synchronizing Literals</h1></span>

Abstract

   The Internet Message Access Protocol (<a href="https://tools.ietf.org/html/rfc3501">RFC 3501</a>) contains the
   &quot;literal&quot; syntactic construct for communicating strings.  When
   sending a literal from client to server, IMAP requires the client to
   wait for the server to send a command continuation request between
   sending the octet count and the string data.  This document specifies
   an alternate form of literal that does not require this network round
   trip.

   This document specifies 2 IMAP extensions: LITERAL+ and LITERAL-.
   LITERAL+ allows the alternate form of literals in all IMAP commands.
   LITERAL- is the same as LITERAL+, but it disallows the alternate form
   of literals unless they are 4096 bytes or less.

   This document obsoletes <a href="https://tools.ietf.org/html/rfc2088">RFC 2088</a>.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="https://tools.ietf.org/html/rfc5741#section-2">Section&nbsp;2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7888">http://www.rfc-editor.org/info/rfc7888</a>.












<span class="grey">Melnikov                     Standards Track                    [Page 1]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-2" id="page-2" href="https://tools.ietf.org/html/rfc7888#page-2" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7888">RFC 7888</a>            IMAP4 Non-synchronizing Literals            May 2016</span>


Copyright Notice

   Copyright (c) 2016 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

Table of Contents

   <a href="https://tools.ietf.org/html/rfc7888#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-3">3</a>
   <a href="https://tools.ietf.org/html/rfc7888#section-2">2</a>.  Conventions . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-3">3</a>
   <a href="https://tools.ietf.org/html/rfc7888#section-3">3</a>.  Specification . . . . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-3">3</a>
   4.  Considerations on When to Use and Not to Use Synchronizing
       Literals  . . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-5">5</a>
   <a href="https://tools.ietf.org/html/rfc7888#section-5">5</a>.  LITERAL- Capability . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-5">5</a>
   <a href="https://tools.ietf.org/html/rfc7888#section-6">6</a>.  Interaction with BINARY Extension . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-6">6</a>
   <a href="https://tools.ietf.org/html/rfc7888#section-7">7</a>.  Interaction with MULTIAPPEND Extension  . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-6">6</a>
   <a href="https://tools.ietf.org/html/rfc7888#section-8">8</a>.  Formal Syntax . . . . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-6">6</a>
   <a href="https://tools.ietf.org/html/rfc7888#section-9">9</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-7">7</a>
   <a href="https://tools.ietf.org/html/rfc7888#section-10">10</a>. IANA Considerations . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-7">7</a>
   <a href="https://tools.ietf.org/html/rfc7888#section-11">11</a>. References  . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-7">7</a>
     <a href="https://tools.ietf.org/html/rfc7888#section-11.1">11.1</a>.  Normative References . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-7">7</a>
     <a href="https://tools.ietf.org/html/rfc7888#section-11.2">11.2</a>.  Informative References . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-8">8</a>
   <a href="https://tools.ietf.org/html/rfc7888#appendix-A">Appendix A</a>.  Changes since <a href="https://tools.ietf.org/html/rfc2088">RFC 2088</a> . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-9">9</a>
   Acknowledgments . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-9">9</a>
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="https://tools.ietf.org/html/rfc7888#page-9">9</a>





<span class="grey">Melnikov                     Standards Track                    [Page 2]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-3" id="page-3" href="https://tools.ietf.org/html/rfc7888#page-3" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7888">RFC 7888</a>            IMAP4 Non-synchronizing Literals            May 2016</span>


<span class="h2"><h2><a class="selflink" name="section-1" href="https://tools.ietf.org/html/rfc7888#section-1">1</a>. Introduction</h2></span>

   The Internet Message Access Protocol [<a href="https://tools.ietf.org/html/rfc3501" title="&quot;INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1&quot;">RFC3501</a>] contains the &quot;literal&quot;
   syntactic construct for communicating strings.  When sending a
   literal from client to server, IMAP requires the client to wait for
   the server to send a command continuation request between sending the
   octet count and the string data.  This document specifies an
   alternate form of literal that does not require this network round
   trip.

   This document specifies 2 IMAP extensions: LITERAL+ and LITERAL-.
   LITERAL+ allows the alternate form of literals (called &quot;non-
   synchronized literals&quot; below) in all IMAP commands.  LITERAL- is the
   same as LITERAL+, but it disallows the alternate form of literals
   unless they are 4096 bytes or less.

<span class="h2"><h2><a class="selflink" name="section-2" href="https://tools.ietf.org/html/rfc7888#section-2">2</a>. Conventions</h2></span>

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this
   document are to be interpreted as described in [<a href="https://tools.ietf.org/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>].

   In examples, &quot;C:&quot; and &quot;S:&quot; indicate lines sent by the client and
   server, respectively.  If a single &quot;C:&quot; or &quot;S:&quot; label applies to
   multiple lines, then the line breaks between those lines are for
   editorial clarity only and are not part of the actual protocol
   exchange.

<span class="h2"><h2><a class="selflink" name="section-3" href="https://tools.ietf.org/html/rfc7888#section-3">3</a>. Specification</h2></span>

   The non-synchronizing literal is added as an alternate form of
   literal, and it may appear in communication from client to server
   instead of the IMAP [<a href="https://tools.ietf.org/html/rfc3501" title="&quot;INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1&quot;">RFC3501</a>] form of literal.  The IMAP form of
   literal, used in communication from client to server, is referred to
   as a synchronizing literal.  The non-synchronizing literal form MUST
   NOT be sent from server to client.

   Non-synchronizing literals may be used with any IMAP server
   implementation that returns &quot;LITERAL+&quot; or &quot;LITERAL-&quot; as one of the
   supported capabilities to the CAPABILITY command.  If the server does
   not advertise either of the above capabilities, the client can only
   use synchronizing literals.  The difference between LITERAL+ and
   LITERAL- extensions is explained in <a href="https://tools.ietf.org/html/rfc7888#section-5">Section 5</a>.

   The non-synchronizing literal is distinguished from the original
   synchronizing literal by having a plus ('+') between the octet count
   and the closing brace ('}').  The server does not generate a command




<span class="grey">Melnikov                     Standards Track                    [Page 3]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-4" id="page-4" href="https://tools.ietf.org/html/rfc7888#page-4" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7888">RFC 7888</a>            IMAP4 Non-synchronizing Literals            May 2016</span>


   continuation request in response to a non-synchronizing literal, and
   clients are not required to wait before sending the octets of a non-
   synchronizing literal.

   The protocol receiver of an IMAP server MUST check the end of every
   received line (a sequence of octets that ends with a CRLF) for an
   open brace ('{') followed by an octet count, a plus ('+'), and a
   close brace ('}') immediately preceding the CRLF.  This sequence (if
   found by the receiver) is the octet count of a non-synchronizing
   literal, and the server MUST treat the specified number of following
   octets and the following line (as defined in [<a href="https://tools.ietf.org/html/rfc3501" title="&quot;INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1&quot;">RFC3501</a>]) as part of
   the same command.

   It's important to note that the literal is not delimited by CRLF.  It
   ends after the number of bytes specified by the octet count, and the
   current command continues from there.  There might be a CRLF
   immediately after; it ends the command.  Or, there might be more
   octets, specifying other command parameters, before the CRLF.  If a
   SP (space) character is needed between parameters, it's important
   that the SP appear after the literal, in its appropriate place.

   A server MAY still process commands and reject errors on a line-by-
   line basis, as long as it checks for non-synchronizing literals at
   the end of each line.

   Example:

   C: A001 LOGIN {11+}
   C: FRED FOOBAR {7+}
   C: fat man
   S: A001 OK LOGIN completed

   This is semantically equivalent to this version that uses quoted
   strings instead of literals:

   C: A001 LOGIN &quot;FRED FOOBAR&quot; &quot;fat man&quot;
   S: A001 OK LOGIN completed

   Note that the space after FOOBAR in the first version corresponds
   to the space between the two quoted strings in the second.











<span class="grey">Melnikov                     Standards Track                    [Page 4]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-5" id="page-5" href="https://tools.ietf.org/html/rfc7888#page-5" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7888">RFC 7888</a>            IMAP4 Non-synchronizing Literals            May 2016</span>


<span class="h2"><h2><a class="selflink" name="section-4" href="https://tools.ietf.org/html/rfc7888#section-4">4</a>. Considerations on When to Use and Not to Use Synchronizing Literals</h2></span>

   Understanding of this section is important for both client and server
   developers of this IMAP extension.

   While non-synchronizing literals have clear advantages for clients,
   such as simplicity of use, they might be more difficult to handle on
   the server side.  When a client uses a non-synchronizing literal that
   is too big for the server to accept, a server implementation that is
   compliant with LITERAL+ has to make a choice between a couple non-
   optimal choices:

   1.  Read the number of bytes specified in the non-synchronizing
       literal and reject the command that included the literal anyway.
       (The server is allowed to send the tagged BAD/NO response before
       reading the whole non-synchronizing literal.)  This is quite
       wasteful of bandwidth if the literal is large.

   2.  Send an untagged BYE response explaining the reason for rejecting
       the literal (possibly accompanied by an ALERT response code in
       another response) and close the connection.  This will force the
       client to reconnect or report the error to the user.  In the
       latter case, the error is unlikely to be understandable to the
       user.  Additionally, some naive clients are known to blindly
       reconnect in this case and repeat the operation that caused the
       problem, introducing an infinite loop.

   The problem described above is most common when using the APPEND
   command, because most commands don't need to send lots of data from
   the client to the server.  Some server implementations impose limits
   on literals (both synchronizing and non-synchronizing) accepted from
   clients in order to defend against denial-of-service attacks.
   Implementations can generally impose much lower limits on literal
   sizes for all commands other than APPEND.  In order to address
   literal size issue in APPEND, this document introduces a new
   extension LITERAL-, described in <a href="https://tools.ietf.org/html/rfc7888#section-5">Section 5</a>.

   The situation can also be improved by implementing support for the
   APPENDLIMIT extension [<a href="https://tools.ietf.org/html/rfc7889" title="&quot;The IMAP APPENDLIMIT Extension&quot;">RFC7889</a>], which allows a server to advertise
   its APPEND limit, so that well-behaved clients can check it and avoid
   uploading big messages in the first place.

<span class="h2"><h2><a class="selflink" name="section-5" href="https://tools.ietf.org/html/rfc7888#section-5">5</a>. LITERAL- Capability</h2></span>

   The LITERAL- extension is almost identical to LITERAL+, with one
   exception: when LITERAL- is advertised, non-synchronizing literals
   used in any command MUST NOT be larger than 4096 bytes.  Any literal
   larger than 4096 bytes MUST be sent as a synchronizing literal as



<span class="grey">Melnikov                     Standards Track                    [Page 5]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-6" id="page-6" href="https://tools.ietf.org/html/rfc7888#page-6" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7888">RFC 7888</a>            IMAP4 Non-synchronizing Literals            May 2016</span>


   specified in <a href="https://tools.ietf.org/html/rfc3501">RFC 3501</a>.  A server that is compliant with LITERAL- and
   encounters a non-synchronizing literal larger than 4096 bytes
   proceeds as described in <a href="https://tools.ietf.org/html/rfc7888#section-4">Section 4</a>.  If responding to an APPEND
   command, the tagged BAD response MUST contain the TOOBIG response
   code [<a href="https://tools.ietf.org/html/rfc4469" title="&quot;Internet Message Access Protocol (IMAP) CATENATE Extension&quot;">RFC4469</a>].  If responding with an untagged BYE response, it
   SHOULD include the TOOBIG response code.  Note that the form of the
   non-synchronizing literal does not change: it still uses the &quot;+&quot; in
   the literal itself, even if the applicable extension is LITERAL-.

   Because LITERAL- is a more restricted version of LITERAL+, IMAP
   servers MUST NOT advertise both of these capabilities at the same
   time.  (A server implementation can choose to have a configuration
   option to indicate which one to advertise.)

<span class="h2"><h2><a class="selflink" name="section-6" href="https://tools.ietf.org/html/rfc7888#section-6">6</a>. Interaction with BINARY Extension</h2></span>

   [<a name="ref-RFC4466" id="ref-RFC4466">RFC4466</a>] updated the non-terminal &quot;literal8&quot; defined in [<a href="https://tools.ietf.org/html/rfc3516" title="&quot;IMAP4 Binary Content Extension&quot;">RFC3516</a>] to
   allow for non-synchronizing literals if both BINARY [<a href="https://tools.ietf.org/html/rfc3516" title="&quot;IMAP4 Binary Content Extension&quot;">RFC3516</a>] and
   LITERAL+ extensions are supported by the server.

   This document also allows use of this extended &quot;literal8&quot; syntax when
   both BINARY [<a href="https://tools.ietf.org/html/rfc3516" title="&quot;IMAP4 Binary Content Extension&quot;">RFC3516</a>] and LITERAL- extensions are supported by the
   server.

<span class="h2"><h2><a class="selflink" name="section-7" href="https://tools.ietf.org/html/rfc7888#section-7">7</a>. Interaction with MULTIAPPEND Extension</h2></span>

   [<a name="ref-RFC3502" id="ref-RFC3502">RFC3502</a>] describes MULTIAPPEND extension and how it can be used with
   LITERAL+.  The LITERAL- extension can be used with the MULTIAPPEND
   extension in the same way.

<span class="h2"><h2><a class="selflink" name="section-8" href="https://tools.ietf.org/html/rfc7888#section-8">8</a>. Formal Syntax</h2></span>

   The following syntax specification uses the Augmented Backus-Naur
   Form (ABNF) notation as specified in [<a href="https://tools.ietf.org/html/rfc7888#ref-ABNF" title="&quot;Augmented BNF for Syntax Specifications: ABNF&quot;">ABNF</a>].

   Non-terminals referenced but not defined below are as defined by
   [<a href="https://tools.ietf.org/html/rfc3501" title="&quot;INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1&quot;">RFC3501</a>].

     literal = &quot;{&quot; number [&quot;+&quot;] &quot;}&quot; CRLF *CHAR8
                ; Number represents the number of CHAR8 octets

     CHAR8   = &lt;defined in <a href="https://tools.ietf.org/html/rfc3501">RFC 3501</a>&gt;

     literal8 = &lt;defined in <a href="https://tools.ietf.org/html/rfc4466">RFC 4466</a>&gt;







<span class="grey">Melnikov                     Standards Track                    [Page 6]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-7" id="page-7" href="https://tools.ietf.org/html/rfc7888#page-7" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7888">RFC 7888</a>            IMAP4 Non-synchronizing Literals            May 2016</span>


<span class="h2"><h2><a class="selflink" name="section-9" href="https://tools.ietf.org/html/rfc7888#section-9">9</a>. Security Considerations</h2></span>

   Use of non-synchronizing literals can consume extra resources (e.g.
   memory) on IMAP servers and can be used for denial-of-service
   attacks.  The LITERAL- extension partially improved this situation.

   This document doesn't raise any security concerns beyond those raised
   by [<a href="https://tools.ietf.org/html/rfc3501" title="&quot;INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1&quot;">RFC3501</a>].

<span class="h2"><h2><a class="selflink" name="section-10" href="https://tools.ietf.org/html/rfc7888#section-10">10</a>. IANA Considerations</h2></span>

   IMAP4 capabilities are registered by publishing a Standards Track or
   IESG-approved Experimental RFC.  The registry is currently located at
   &lt;<a href="http://www.iana.org/assignments/imap-capabilities">http://www.iana.org/assignments/imap-capabilities</a>&gt;.

   IANA has updated the above registry so that the reference for
   &quot;LITERAL+&quot; points to this document.

   IANA has added the &quot;LITERAL-&quot; capability to the above registry, with
   this document as the reference.

<span class="h2"><h2><a class="selflink" name="section-11" href="https://tools.ietf.org/html/rfc7888#section-11">11</a>. References</h2></span>

<span class="h3"><h3><a class="selflink" name="section-11.1" href="https://tools.ietf.org/html/rfc7888#section-11.1">11.1</a>. Normative References</h3></span>

   [<a name="ref-ABNF" id="ref-ABNF">ABNF</a>]     Crocker, D., Ed. and P. Overell, &quot;Augmented BNF for Syntax
              Specifications: ABNF&quot;, STD 68, <a href="https://tools.ietf.org/html/rfc5234">RFC 5234</a>,
              DOI 10.17487/RFC5234, January 2008,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5234">http://www.rfc-editor.org/info/rfc5234</a>&gt;.

   [<a name="ref-RFC2119" id="ref-RFC2119">RFC2119</a>]  Bradner, S., &quot;Key words for use in RFCs to Indicate
              Requirement Levels&quot;, <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="https://tools.ietf.org/html/rfc2119">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a name="ref-RFC3501" id="ref-RFC3501">RFC3501</a>]  Crispin, M., &quot;INTERNET MESSAGE ACCESS PROTOCOL - VERSION
              4rev1&quot;, <a href="https://tools.ietf.org/html/rfc3501">RFC 3501</a>, DOI 10.17487/RFC3501, March 2003,
              &lt;<a href="http://www.rfc-editor.org/info/rfc3501">http://www.rfc-editor.org/info/rfc3501</a>&gt;.

   [<a name="ref-RFC3516" id="ref-RFC3516">RFC3516</a>]  Nerenberg, L., &quot;IMAP4 Binary Content Extension&quot;, <a href="https://tools.ietf.org/html/rfc3516">RFC 3516</a>,
              DOI 10.17487/RFC3516, April 2003,
              &lt;<a href="http://www.rfc-editor.org/info/rfc3516">http://www.rfc-editor.org/info/rfc3516</a>&gt;.

   [<a name="ref-RFC4466" id="ref-RFC4466">RFC4466</a>]  Melnikov, A. and C. Daboo, &quot;Collected Extensions to IMAP4
              ABNF&quot;, <a href="https://tools.ietf.org/html/rfc4466">RFC 4466</a>, DOI 10.17487/RFC4466, April 2006,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4466">http://www.rfc-editor.org/info/rfc4466</a>&gt;.





<span class="grey">Melnikov                     Standards Track                    [Page 7]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-8" id="page-8" href="https://tools.ietf.org/html/rfc7888#page-8" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7888">RFC 7888</a>            IMAP4 Non-synchronizing Literals            May 2016</span>


   [<a name="ref-RFC4469" id="ref-RFC4469">RFC4469</a>]  Resnick, P., &quot;Internet Message Access Protocol (IMAP)
              CATENATE Extension&quot;, <a href="https://tools.ietf.org/html/rfc4469">RFC 4469</a>, DOI 10.17487/RFC4469, April
              2006, &lt;<a href="http://www.rfc-editor.org/info/rfc4469">http://www.rfc-editor.org/info/rfc4469</a>&gt;.

<span class="h3"><h3><a class="selflink" name="section-11.2" href="https://tools.ietf.org/html/rfc7888#section-11.2">11.2</a>. Informative References</h3></span>

   [<a name="ref-RFC3502" id="ref-RFC3502">RFC3502</a>]  Crispin, M., &quot;Internet Message Access Protocol (IMAP) -
              MULTIAPPEND Extension&quot;, <a href="https://tools.ietf.org/html/rfc3502">RFC 3502</a>, DOI 10.17487/RFC3502,
              March 2003, &lt;<a href="http://www.rfc-editor.org/info/rfc3502">http://www.rfc-editor.org/info/rfc3502</a>&gt;.

   [<a name="ref-RFC7889" id="ref-RFC7889">RFC7889</a>]  SrimushnamBoovaraghamoorthy, J. and N. Bisht, &quot;The IMAP
              APPENDLIMIT Extension&quot;, <a href="https://tools.ietf.org/html/rfc7889">RFC 7889</a>, DOI 10.17487/RFC7889,
              May 2016, &lt;<a href="http://www.rfc-editor.org/info/rfc7889">http://www.rfc-editor.org/info/rfc7889</a>&gt;.






































<span class="grey">Melnikov                     Standards Track                    [Page 8]</span></pre> 
   <hr class="noprint" style="width: 96ex;" align="left" />
   <!--NewPage-->
   <pre class="newpage"><a name="page-9" id="page-9" href="https://tools.ietf.org/html/rfc7888#page-9" class="invisible"> </a>
<span class="grey"><a href="https://tools.ietf.org/html/rfc7888">RFC 7888</a>            IMAP4 Non-synchronizing Literals            May 2016</span>


<span class="h2"><h2><a class="selflink" name="appendix-A" href="https://tools.ietf.org/html/rfc7888#appendix-A">Appendix A</a>. Changes since <a href="https://tools.ietf.org/html/rfc2088">RFC 2088</a></h2></span>

   Added IANA registration.

   Updated references.  Also updated considerations about interactions
   of IMAP extensions.

   Added implementation considerations based on the IMAP mailing list
   discussions.

   Added description of a new capability: LITERAL-.

Acknowledgments

   John G. Myers edited the original LITERAL+ extension.

   Valuable comments, both in agreement and in dissent, were received
   from Dave Cridland, Michael M. Slusarz, Arnt Gulbrandsen, Jayantheesh
   SrimushnamBoovaraghamoorthy, Jamie Nicolson, Barry Leiba, and SM.

Author's Address

   Alexey Melnikov (editor)
   Isode Ltd
   14 Castle Mews
   Hampton, Middlesex  TW12 2NP
   United Kingdom

   Email: Alexey.Melnikov@isode.com






















Melnikov                     Standards Track                    [Page 9]

</pre>
   <br /> 
   <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.127, available from <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a> </small></small></span> 
  </div> 
 </body>
</html>